{"version":3,"sources":["webpack:///static/js/app.d6d34767d79a4d900248.js","webpack:///./src/main.js","webpack:///./src/libs/Tools.js","webpack:///./src/libs/Drawing.js","webpack:///./src/libs/ColorUtil.js","webpack:///./src/libs/DrawingManager.js","webpack:///App.vue","webpack:///UiCanvas.vue","webpack:///UiLayerList.vue","webpack:///UiSlider.vue","webpack:///./src/App.vue","webpack:///./src/components/UiCanvas.vue","webpack:///./src/components/UiLayerList.vue","webpack:///./src/components/UiSlider.vue","webpack:///./src/components/UiCanvas.vue?ce90","webpack:///./src/components/UiSlider.vue?ef7f","webpack:///./src/App.vue?0d2e","webpack:///./src/components/UiLayerList.vue?28f7"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","Vue","el","template","components","App","10","Object","defineProperty","value","tools","PEN","window","Symbol","BRUSH","ERASER","SPOIT","FILL","COLOR","fromName","name","25","_slicedToArray2","_slicedToArray3","_defineProperties","_defineProperties2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_color","_color2","_Tools","_Tools2","Drawing","mainColor","tool","canvas","width","arguments","length","undefined","height","showPen","showBase","showExtra","this","url","history","shape","document","createElement","overlap","style","currentStyle","getComputedStyle","styleWidth","parseInt","styleHeight","ctx","getContext","devicePixelRatio","scale","setupCanvas","_mainColor","_canvas","key","path","color","size","lineCap","strokeStyle","hex","globalAlpha","a","lineWidth","globalCompositeOperation","beginPath","i","Math","max","_path$i","cx","cy","_ref","_ref2","nx","ny","moveTo","lineTo","stroke","editRange","drawImage","lx","ly","rx","ry","ctx2","updateCanvas","clearRect","ctx3","origShape","origOverlap","info","tune","ctxOrig","w","h","putImageData","getImageData","pen","base","extra","get","toDataURL","orig","copied","Uint8ClampedArray","data","set","ps","ImageData","cache","newColor","c","slice","join","Color","rgb","rotate","hue","saturate","sat","lighten","val","array","concat","58","hslToYuv","s","l","r","g","b","hue2rgb","p","q","t","round","y","u","v","rgbToYuv","59","_getIterator2","_getIterator3","_assign","_assign2","_mlKmeans","_mlKmeans2","_mlDistance","_mlDistance2","_Drawing","_Drawing2","_ColorUtil","MEASURE_ITER_COUNT","SORT_DIV","layerIndex","DrawingManager","fixedObject","objects","objectIndexes","layers","histories","sortCache","lastKey","clearedKey","_styleWidth","_styleHeight","drawPen","drawBrush","updateSort","update","getKey","rgba","target","indexOf","toString","push","getToolString","drawObject","currentColorString","getColorString","allColors","filter","x","map","getColor","overlapping","checkOverlap","colors","comp","spilled","self","sameIndexes","last","idx","simIndexes","currentColor","console","log","abs","dist","distance","euclidean","targetIdx","minTarget","d","changed","drawOverlapObject","sim","drawObjectComp","splice","eraseObject","k","split","eraseOverlapObject","clear","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","imageUrl","err","return","reverse","_this","c1","d1","ctx1","c2","d2","sort","key1","key2","o1","o2","tool1","tool2","cacheKey","oc1","oc2","fillStyle","fillRect","imgdata","_DrawingManager$measu","measureArea","_DrawingManager$measu2","result","_DrawingManager$measu3","_DrawingManager$measu4","point","spoitColor","points","filledColor","layerIdx","historyIdx","changeVisual","colorString","_x","_y","_w","targetColors","range","hits","Array","fill","ox","oy","random","getImageDataFaster","j","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","arr","before","kms","bics","Number","NEGATIVE_INFINITY","cluster_arr","km","newArr","clusters","res","computeBic","bic","resClusters","centers","centroids","centroid","labels","m","n","N","clVar","constTerm","PI","60","_from","_from2","_vueColor","_vueMaterial","_vueMaterial2","_UiCanvas","_UiCanvas2","_UiSlider","_UiSlider2","_UiLayerList","_UiLayerList2","_DrawingManager","_DrawingManager2","use","currentTool","prevTool","toolSizes","Sketch","UiCanvas","UiLayerList","UiSlider","drawingManager","defaultSize","tuneTargetKey","tuneTarget","tuneInfo","tuneShape","tuneOverlap","showPalette","mounted","querySelector","count","startTime","counter","Date","getTime","title","requestAnimationFrame","methods","onchange","toggletool","$refs","slider","setValue","onchangesize","onextractcolor","colorPicker","colorChange","newcanvas","toolButtons","$el","children","classList","remove","penButton","add","onclear","index","rollback","openColorDialog","hueSlider","satSlider","valSlider","colorDialog","open","closeColorDialog","po","close","applyColorDialog","targetTool","targetColor","floor","newKey","ontune","targetKey","onchangehue","colorTune","onchangesat","onchangeval","onchangevisiual","togglepalette","61","getMousePos","event","rect","getBoundingClientRect","clientX","touches","clientY","left","top","props","currentStroke","drawing","eraseTarget","addEventListener","dragover","drop","mousedown","preventDefault","_getMousePos","_getMousePos2","mousex","mousey","firstTarget","spoit","$emit","getTopKey","draw","updateerasertarget","mousemove","_currentStroke","pmousex","pmousey","_getMousePos3","_getMousePos4","min","mouseup","erase","$parent","cos","sin","file","dataTransfer","files","type","reader","FileReader","onload","image","setAttribute","readAsDataURL","62","active","mouseover","mouseleave","63","_draggabilly","_draggabilly2","keyboardStep","defaultValue","dragging","draggable","thumb","containment","container","axis","on","dragStart","dragMove","dragEnd","sliderClick","e","sliderPosition","newValue","_pointerDown","focus","position","increment","decrement","updateThumb","emit","moderatedValue","109","110","111","112","113","176","Component","177","178","179","180","render","_vm","_h","$createElement","_c","_self","attrs","id","_v","ref","touchstart","touchmove","touchend","staticRenderFns","181","staticClass","class","tabindex","keydown","$event","_k","keyCode","button","182","current-color","current-tool","prev-tool","tool-sizes","drawing-manager","directives","rawName","expression","change-color","model","callback","$$v","change-value","_e","change","click","md-single","183","_l","layer","src","staticStyle","display"],"mappings":"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","file":"static/js/app.d6d34767d79a4d900248.js","sourcesContent":["webpackJsonp([2,0],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(24);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(176);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _vue2.default({\n\t  el: '#app',\n\t  template: '<App/>',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ }),\n\n/***/ 10:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar tools = {\n\t  PEN: window.Symbol('PEN'),\n\t  BRUSH: window.Symbol('BRUSH'),\n\t  ERASER: window.Symbol('ERASER'),\n\t  SPOIT: window.Symbol('SPOIT'),\n\t  FILL: window.Symbol('FILL'),\n\t  COLOR: window.Symbol('COLOR'),\n\t  fromName: function fromName(name) {\n\t    switch (name) {\n\t      case 'pen':\n\t        return tools.PEN;\n\t      case 'brush':\n\t        return tools.BRUSH;\n\t      case 'eraser':\n\t        return tools.ERASER;\n\t      case 'spoit':\n\t        return tools.SPOIT;\n\t      case 'fill':\n\t        return tools.FILL;\n\t      case 'color':\n\t        return tools.COLOR;\n\t      default:\n\t        return undefined;\n\t    }\n\t  }\n\t};\n\t\n\texports.default = tools;\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray2 = __webpack_require__(14);\n\t\n\tvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\t\n\tvar _defineProperties = __webpack_require__(27);\n\t\n\tvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\t\n\tvar _classCallCheck2 = __webpack_require__(28);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(29);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _color = __webpack_require__(31);\n\t\n\tvar _color2 = _interopRequireDefault(_color);\n\t\n\tvar _Tools = __webpack_require__(10);\n\t\n\tvar _Tools2 = _interopRequireDefault(_Tools);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Drawing = function () {\n\t  function Drawing(mainColor, tool, canvas) {\n\t    var width = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\t    var height = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\t    var showPen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\t    var showBase = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n\t    var showExtra = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : true;\n\t    (0, _classCallCheck3.default)(this, Drawing);\n\t\n\t    this.mainColor = mainColor;\n\t    this.tool = tool;\n\t    this.canvas = canvas;\n\t    this.url = null;\n\t    this.history = null;\n\t    this.shape = document.createElement('canvas');\n\t    this.overlap = document.createElement('canvas');\n\t    this.showPen = showPen;\n\t    this.showBase = showBase;\n\t    this.showExtra = showExtra;\n\t\n\t    if (width === 0 && height === 0) {\n\t      var style = canvas.currentStyle || window.getComputedStyle(canvas);\n\t      this.styleWidth = window.parseInt(style.width);\n\t      this.styleHeight = window.parseInt(style.height);\n\t    } else {\n\t      this.styleWidth = width;\n\t      this.styleHeight = height;\n\t    }\n\t\n\t    var ctx = canvas.getContext('2d');\n\t    this.canvas.width = this.styleWidth * window.devicePixelRatio;\n\t    this.canvas.height = this.styleHeight * window.devicePixelRatio;\n\t    this.canvas.style.width = this.styleWidth;\n\t    this.canvas.style.height = this.styleHeight;\n\t    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n\t\n\t    Drawing.setupCanvas(this.canvas, this.styleWidth, this.styleHeight);\n\t    Drawing.setupCanvas(this.shape, this.styleWidth, this.styleHeight);\n\t    Drawing.setupCanvas(this.overlap, this.styleWidth, this.styleHeight);\n\t\n\t    (0, _defineProperties2.default)(this, {\n\t      _mainColor: {\n\t        value: this.mainColor\n\t      },\n\t      _canvas: {\n\t        value: this.canvas\n\t      }\n\t    });\n\t  }\n\t\n\t  (0, _createClass3.default)(Drawing, [{\n\t    key: 'draw',\n\t    value: function draw(path, color, tool, size) {\n\t      if (path.length === 0) {\n\t        return;\n\t      }\n\t\n\t      var ctx = this.canvas.getContext('2d');\n\t      ctx.lineCap = 'round';\n\t      switch (tool) {\n\t        case _Tools2.default.PEN:\n\t        case _Tools2.default.BRUSH:\n\t          ctx.strokeStyle = color.hex;\n\t          ctx.globalAlpha = color.a;\n\t          break;\n\t        case _Tools2.default.ERASER:\n\t          ctx.strokeStyle = '#fff';\n\t          ctx.globalAlpha = 1.0;\n\t          break;\n\t        default:\n\t          return;\n\t      }\n\t      ctx.lineWidth = size;\n\t      ctx.globalCompositeOperation = 'source-over';\n\t\n\t      ctx.beginPath();\n\t      for (var i = 0; i < Math.max(path.length - 1, 1); i += 1) {\n\t        var _path$i = (0, _slicedToArray3.default)(path[i], 2),\n\t            cx = _path$i[0],\n\t            cy = _path$i[1];\n\t\n\t        var _ref = path[i + 1] || path[i],\n\t            _ref2 = (0, _slicedToArray3.default)(_ref, 2),\n\t            nx = _ref2[0],\n\t            ny = _ref2[1];\n\t\n\t        ctx.moveTo(cx, cy);\n\t        ctx.lineTo(nx, ny);\n\t      }\n\t      ctx.stroke();\n\t\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'drawObjectComp',\n\t    value: function drawObjectComp(obj, editRange) {\n\t      var ctx = this.shape.getContext('2d');\n\t      if (editRange) {\n\t        ctx.drawImage(obj.shape, editRange.lx * window.devicePixelRatio, editRange.ly * window.devicePixelRatio, (editRange.rx - editRange.lx) * window.devicePixelRatio, (editRange.ry - editRange.ly) * window.devicePixelRatio, editRange.lx, editRange.ly, editRange.rx - editRange.lx, editRange.ry - editRange.ly);\n\t      } else {\n\t        ctx.drawImage(obj.shape, 0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      var ctx2 = this.overlap.getContext('2d');\n\t      if (editRange) {\n\t        ctx2.drawImage(obj.canvas, editRange.lx * window.devicePixelRatio, editRange.ly * window.devicePixelRatio, (editRange.rx - editRange.lx) * window.devicePixelRatio, (editRange.ry - editRange.ly) * window.devicePixelRatio, editRange.lx, editRange.ly, editRange.rx - editRange.lx, editRange.ry - editRange.ly);\n\t      } else {\n\t        ctx2.drawImage(obj.overlap, 0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      this.updateCanvas();\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'drawObject',\n\t    value: function drawObject(obj, editRange) {\n\t      if (this.tool) {\n\t        if (this.tool === 'Symbol(PEN)' && !this.showPen) {\n\t          return;\n\t        }\n\t        if (this.tool === 'Symbol(BRUSH)' && !this.showBase) {\n\t          return;\n\t        }\n\t      }\n\t      var ctx = this.shape.getContext('2d');\n\t      if (editRange) {\n\t        ctx.drawImage(obj.canvas, editRange.lx * window.devicePixelRatio, editRange.ly * window.devicePixelRatio, (editRange.rx - editRange.lx) * window.devicePixelRatio, (editRange.ry - editRange.ly) * window.devicePixelRatio, editRange.lx, editRange.ly, editRange.rx - editRange.lx, editRange.ry - editRange.ly);\n\t      } else {\n\t        ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      this.updateCanvas();\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'drawOverlapObject',\n\t    value: function drawOverlapObject(obj, editRange) {\n\t      if (!this.showExtra) {\n\t        return;\n\t      }\n\t      var ctx = this.overlap.getContext('2d');\n\t      if (editRange) {\n\t        ctx.drawImage(obj.canvas, editRange.lx * window.devicePixelRatio, editRange.ly * window.devicePixelRatio, (editRange.rx - editRange.lx) * window.devicePixelRatio, (editRange.ry - editRange.ly) * window.devicePixelRatio, editRange.lx, editRange.ly, editRange.rx - editRange.lx, editRange.ry - editRange.ly);\n\t      } else {\n\t        ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      this.updateCanvas();\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'eraseObject',\n\t    value: function eraseObject(obj) {\n\t      if (this.tool) {\n\t        if (this.tool === 'Symbol(PEN)' && !this.showPen) {\n\t          return;\n\t        }\n\t        if (this.tool === 'Symbol(BRUSH)' && !this.showBase) {\n\t          return;\n\t        }\n\t      }\n\t      var ctx = this.shape.getContext('2d');\n\t\n\t      ctx.globalCompositeOperation = 'destination-out';\n\t      ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n\t      ctx.globalCompositeOperation = 'source-over';\n\t\n\t      this.updateCanvas();\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'eraseOverlapObject',\n\t    value: function eraseOverlapObject(obj) {\n\t      if (!this.showExtra) {\n\t        return;\n\t      }\n\t      var ctx = this.overlap.getContext('2d');\n\t\n\t      ctx.globalCompositeOperation = 'destination-out';\n\t      ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n\t      ctx.globalCompositeOperation = 'source-over';\n\t\n\t      this.canvas.getContext('2d').clearRect(0, 0, this.styleWidth, this.styleHeight);\n\t      this.updateCanvas();\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear(editRange) {\n\t      var ctx = this.canvas.getContext('2d');\n\t      if (editRange) {\n\t        ctx.clearRect(editRange.lx, editRange.ly, editRange.rx - editRange.lx, editRange.ry - editRange.ly);\n\t      } else {\n\t        ctx.clearRect(0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      var ctx2 = this.shape.getContext('2d');\n\t      if (editRange) {\n\t        ctx2.clearRect(editRange.lx, editRange.ly, editRange.rx - editRange.lx, editRange.ry - editRange.ly);\n\t      } else {\n\t        ctx2.clearRect(0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      var ctx3 = this.shape.getContext('2d');\n\t      if (editRange) {\n\t        ctx3.clearRect(editRange.lx, editRange.ly, editRange.rx - editRange.lx, editRange.ry - editRange.ly);\n\t      } else {\n\t        ctx3.clearRect(0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'colorTune',\n\t    value: function colorTune(origShape, origOverlap, info) {\n\t      Drawing.tune(origShape, this.shape, info);\n\t      Drawing.tune(origOverlap, this.overlap, info);\n\t      this.updateCanvas();\n\t      this.url = null;\n\t    }\n\t  }, {\n\t    key: 'updateCanvas',\n\t    value: function updateCanvas(editRange) {\n\t      var ctxOrig = this.canvas.getContext('2d');\n\t      if (!this.tool || this.tool === 'Symbol(PEN)' && this.showPen || this.tool === 'Symbol(BRUSH)' && this.showBase) {\n\t        if (editRange) {\n\t          var w = (editRange.rx - editRange.lx) * window.devicePixelRatio;\n\t          var h = (editRange.ry - editRange.ly) * window.devicePixelRatio;\n\t          ctxOrig.putImageData(this.shape.getContext('2d').getImageData(editRange.lx, editRange.ly, w, h), editRange.lx, editRange.ly);\n\t        } else {\n\t          ctxOrig.putImageData(this.shape.getContext('2d').getImageData(0, 0, this.shape.width, this.shape.height), 0, 0);\n\t        }\n\t        ctxOrig.globalCompositeOperation = 'source-atop';\n\t      }\n\t      if (this.tool === 'Symbol(BRUSH)' && this.showExtra) {\n\t        ctxOrig.drawImage(this.overlap, 0, 0, this.styleWidth, this.styleHeight);\n\t      }\n\t      ctxOrig.globalCompositeOperation = 'source-over';\n\t    }\n\t  }, {\n\t    key: 'changeVisual',\n\t    value: function changeVisual(pen, base, extra) {\n\t      this.showPen = pen;\n\t      this.showBase = base;\n\t      this.showExtra = extra;\n\t      this.url = null;\n\t      this.canvas.getContext('2d').clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t      this.updateCanvas();\n\t    }\n\t  }, {\n\t    key: 'imageUrl',\n\t    get: function get() {\n\t      if (!this.url) {\n\t        this.url = this.canvas.toDataURL();\n\t      }\n\t      return this.url;\n\t    }\n\t  }], [{\n\t    key: 'setupCanvas',\n\t    value: function setupCanvas(canvas, styleWidth, styleHeight) {\n\t      var ctx = canvas.getContext('2d');\n\t      canvas.width = styleWidth * window.devicePixelRatio;\n\t      canvas.height = styleHeight * window.devicePixelRatio;\n\t      canvas.style.width = styleWidth;\n\t      canvas.style.height = styleHeight;\n\t      ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n\t    }\n\t  }, {\n\t    key: 'tune',\n\t    value: function tune(orig, canvas, info) {\n\t      var copied = new Uint8ClampedArray(orig.data);\n\t      copied.set(orig);\n\t      var ps = new window.ImageData(copied, canvas.width, canvas.height);\n\t      var cache = {};\n\t      for (var i = 0; i < ps.data.length; i += 4) {\n\t        if (ps.data[i + 3] === 0) {\n\t          continue;\n\t        }\n\t        var newColor = void 0;\n\t        var c = cache[ps.data.slice(i, i + 4).join(',')];\n\t        if (c) {\n\t          newColor = c;\n\t        } else {\n\t          newColor = _color2.default.rgb(ps.data.slice(i, i + 4)).rotate(info.hue).saturate(info.sat).lighten(info.val);\n\t          newColor = newColor.rgb().array();\n\t          cache[ps.data.slice(i, i + 4).join(',')] = [].concat(newColor);\n\t        }\n\t        ps.data[i] = newColor[0];\n\t        ps.data[i + 1] = newColor[1];\n\t        ps.data[i + 2] = newColor[2];\n\t      }\n\t      canvas.getContext('2d').putImageData(ps, 0, 0);\n\t    }\n\t  }]);\n\t  return Drawing;\n\t}();\n\t\n\texports.default = Drawing;\n\n/***/ }),\n\n/***/ 58:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar hslToYuv = function hslToYuv(h, s, l) {\n\t  h /= 360;\n\t  s /= 100;\n\t  l /= 100;\n\t\n\t  var r = void 0;\n\t  var g = void 0;\n\t  var b = void 0;\n\t\n\t  if (s === 0) {\n\t    r = g = b = l;\n\t  } else {\n\t    var hue2rgb = function hue2rgb(p, q, t) {\n\t      if (t < 0) t += 1;\n\t      if (t > 1) t -= 1;\n\t      if (t < 1 / 6) return p + (q - p) * 6 * t;\n\t      if (t < 1 / 2) return q;\n\t      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n\t      return p;\n\t    };\n\t\n\t    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t    var p = 2 * l - q;\n\t    r = hue2rgb(p, q, h + 1 / 3);\n\t    g = hue2rgb(p, q, h);\n\t    b = hue2rgb(p, q, h - 1 / 3);\n\t  }\n\t\n\t  r = Math.round(r * 255);\n\t  g = Math.round(g * 255);\n\t  b = Math.round(b * 255);\n\t\n\t  var y = 0.299 * r + 0.587 * g + 0.114 * b;\n\t  var u = -0.169 * r - 0.331 * g + 0.500 * b;\n\t  var v = 0.500 * r - 0.419 * g - 0.081 * b;\n\t\n\t  return [y, u, v];\n\t};\n\t\n\tvar rgbToYuv = function rgbToYuv(rgb) {\n\t  var r = Math.round(rgb[0]);\n\t  var g = Math.round(rgb[1]);\n\t  var b = Math.round(rgb[2]);\n\t\n\t  var y = 0.299 * r + 0.587 * g + 0.114 * b;\n\t  var u = -0.169 * r - 0.331 * g + 0.500 * b;\n\t  var v = 0.500 * r - 0.419 * g - 0.081 * b;\n\t\n\t  return [y, u, v];\n\t};\n\t\n\texports.hslToYuv = hslToYuv;\n\texports.rgbToYuv = rgbToYuv;\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray2 = __webpack_require__(14);\n\t\n\tvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\t\n\tvar _getIterator2 = __webpack_require__(26);\n\t\n\tvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\t\n\tvar _assign = __webpack_require__(66);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _defineProperties = __webpack_require__(27);\n\t\n\tvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\t\n\tvar _classCallCheck2 = __webpack_require__(28);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(29);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _mlKmeans = __webpack_require__(161);\n\t\n\tvar _mlKmeans2 = _interopRequireDefault(_mlKmeans);\n\t\n\tvar _mlDistance = __webpack_require__(152);\n\t\n\tvar _mlDistance2 = _interopRequireDefault(_mlDistance);\n\t\n\tvar _Drawing = __webpack_require__(25);\n\t\n\tvar _Drawing2 = _interopRequireDefault(_Drawing);\n\t\n\tvar _Tools = __webpack_require__(10);\n\t\n\tvar _Tools2 = _interopRequireDefault(_Tools);\n\t\n\tvar _ColorUtil = __webpack_require__(58);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MEASURE_ITER_COUNT = 500;\n\tvar SORT_DIV = 1;\n\t\n\tvar layerIndex = 0;\n\t\n\tvar DrawingManager = function () {\n\t  function DrawingManager(canvas) {\n\t    (0, _classCallCheck3.default)(this, DrawingManager);\n\t\n\t    var style = canvas.currentStyle || window.getComputedStyle(canvas);\n\t    this.styleWidth = window.parseInt(style.width);\n\t    this.styleHeight = window.parseInt(style.height);\n\t    this.fixedObject = new _Drawing2.default(null, null, canvas, this.styleWidth, this.styleHeight);\n\t    this.objects = {};\n\t    this.objectIndexes = [];\n\t    this.layers = [];\n\t    this.histories = [];\n\t    this.sortCache = {};\n\t    this.lastKey = null;\n\t    this.clearedKey = null;\n\t    this.showPen = true;\n\t    this.showBase = true;\n\t    this.showExtra = true;\n\t\n\t    (0, _defineProperties2.default)(this, {\n\t      _styleWidth: {\n\t        value: this.styleWidth\n\t      },\n\t      _styleHeight: {\n\t        value: this.styleHeight\n\t      }\n\t    });\n\t  }\n\t\n\t  (0, _createClass3.default)(DrawingManager, [{\n\t    key: 'draw',\n\t    value: function draw(obj, color, tool, editRange) {\n\t      switch (tool) {\n\t        case _Tools2.default.PEN:\n\t          this.drawPen(obj, color, tool, editRange);\n\t          break;\n\t        case _Tools2.default.BRUSH:\n\t          this.drawBrush(obj, color, tool, editRange);\n\t          break;\n\t        default:\n\t          break;\n\t      }\n\t\n\t      this.updateSort();\n\t\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'drawPen',\n\t    value: function drawPen(obj, color, tool) {\n\t      if (!this.showPen) {\n\t        return;\n\t      }\n\t      var key = DrawingManager.getKey(tool, color.rgba.r, color.rgba.g, color.rgba.b);\n\t      var target = void 0;\n\t      if (this.objectIndexes.indexOf(key) === -1) {\n\t        var canvas = document.createElement('canvas');\n\t        target = new _Drawing2.default(color, tool.toString(), canvas, this.styleWidth, this.styleHeight, this.showPen, this.showBase, this.showExtra);\n\t        this.objectIndexes.push(key);\n\t        if (this.clearedKey && DrawingManager.getToolString(this.clearedKey) === 'Symbol(PEN)' && this.objects[this.clearedKey]) {\n\t          target.history = (0, _assign2.default)({}, this.objects[this.clearedKey]);\n\t        }\n\t        this.clearedKey = null;\n\t      } else {\n\t        target = this.objects[key];\n\t      }\n\t      target.drawObject(obj);\n\t      this.objects[key] = target;\n\t      this.lastKey = key;\n\t    }\n\t  }, {\n\t    key: 'drawBrush',\n\t    value: function drawBrush(obj, color, tool, editRange) {\n\t      if (!this.showBase) {\n\t        return;\n\t      }\n\t      var key = DrawingManager.getKey(tool, color.rgba.r, color.rgba.g, color.rgba.b);\n\t      var currentColorString = DrawingManager.getColorString(key);\n\t\n\t      var allColors = this.objectIndexes.filter(function (x) {\n\t        return DrawingManager.getToolString(x) === 'Symbol(BRUSH)';\n\t      }).map(function (x) {\n\t        return DrawingManager.getColor(DrawingManager.getColorString(x));\n\t      });\n\t      allColors.push(DrawingManager.getColor(currentColorString));\n\t\n\t      var overlapping = this.checkOverlap(obj, editRange);\n\t      var colors = [];\n\t      colors = colors.concat(overlapping.comp.map(function (x) {\n\t        return DrawingManager.getColorString(x);\n\t      }));\n\t      colors = colors.concat(overlapping.spilled.map(function (x) {\n\t        return DrawingManager.getColorString(x);\n\t      }));\n\t      colors = colors.filter(function (x, i, self) {\n\t        return self.indexOf(x) === i;\n\t      });\n\t\n\t      var sameIndexes = [];\n\t      var last = -1;\n\t\n\t      while (true) {\n\t        var idx = colors.indexOf(currentColorString, last + 1);\n\t        if (idx === -1) {\n\t          break;\n\t        }\n\t        sameIndexes.push(idx);\n\t        last = idx;\n\t      }\n\t\n\t      var simIndexes = [];\n\t\n\t      var currentColor = DrawingManager.getColor(currentColorString);\n\t      var b = (0, _ColorUtil.rgbToYuv)(currentColor);\n\t      for (var i = 0; i < colors.length; i += 1) {\n\t        var a = (0, _ColorUtil.rgbToYuv)(DrawingManager.getColor(colors[i]));\n\t        console.log('----');\n\t        console.log(Math.abs(a[0] - b[0]));\n\t\n\t        console.log(_mlDistance2.default.distance.euclidean([a[1], a[2]], [b[1], b[2]]));\n\t        console.log(_mlDistance2.default.distance.euclidean(DrawingManager.getColor(colors[i]), currentColor));\n\t\n\t        if (Math.abs(a[0] - b[0]) > 100 || _mlDistance2.default.distance.euclidean([a[1], a[2]], [b[1], b[2]]) > 40) {\n\t          continue;\n\t        }\n\t        simIndexes.push(i);\n\t      }\n\t\n\t      var target = void 0;\n\t      if ((overlapping.spilled.length > 0 || overlapping.comp.length > 0) && simIndexes.length > 0 && simIndexes.length !== sameIndexes.length) {\n\t        if (overlapping.comp.length > 0) {\n\t          var targetIdx = 0;\n\t          var minTarget = 10000;\n\t          for (var _i = 0; _i < overlapping.comp.length; _i += 1) {\n\t            var d = _mlDistance2.default.distance.euclidean(DrawingManager.getColor(DrawingManager.getColorString(overlapping.comp[_i])), currentColor);\n\t            if (d < minTarget) {\n\t              targetIdx = _i;\n\t              minTarget = d;\n\t            }\n\t          }\n\t          target = this.objects[overlapping.comp[targetIdx]];\n\t          var changed = false;\n\t          for (var _i2 = 0; _i2 < overlapping.spilled.length; _i2 += 1) {\n\t            var _d = _mlDistance2.default.distance.euclidean(DrawingManager.getColor(DrawingManager.getColorString(overlapping.spilled[_i2])), currentColor);\n\t            if (_d < minTarget) {\n\t              targetIdx = _i2;\n\t              minTarget = _d;\n\t              changed = true;\n\t            }\n\t          }\n\t          if (changed) {\n\t            target = this.objects[overlapping.spilled[targetIdx]];\n\t          }\n\t\n\t          target.drawOverlapObject(obj);\n\t          this.lastKey = overlapping.comp[simIndexes[0]];\n\t        } else {\n\t          var _targetIdx = 0;\n\t          var _minTarget = 10000;\n\t          for (var _i3 = 0; _i3 < overlapping.spilled.length; _i3 += 1) {\n\t            var _d2 = _mlDistance2.default.distance.euclidean(DrawingManager.getColor(DrawingManager.getColorString(overlapping.spilled[_i3])), currentColor);\n\t            console.log(_d2);\n\t            if (_d2 < _minTarget) {\n\t              console.log('min!!!');\n\t              _targetIdx = _i3;\n\t              _minTarget = _d2;\n\t            }\n\t          }\n\t          target = this.objects[overlapping.spilled[_targetIdx]];\n\t\n\t          target.drawOverlapObject(obj);\n\t          this.lastKey = overlapping.spilled[simIndexes[0]];\n\t        }\n\t      } else if ((overlapping.comp.length > 0 || overlapping.spilled.length > 0) && sameIndexes.length > 0) {\n\t        if (overlapping.comp.length > 0) {\n\t          for (var _i4 = 0; _i4 < overlapping.comp.length; _i4 += 1) {\n\t            var sim = overlapping.comp[_i4];\n\t            if (DrawingManager.getColorString(sim) !== currentColorString) {\n\t              continue;\n\t            }\n\t            if (!target) {\n\t              target = this.objects[overlapping.comp[_i4]];\n\t              continue;\n\t            }\n\t            target.drawObjectComp(this.objects[sim]);\n\t            delete this.objects[sim];\n\t            this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n\t          }\n\t\n\t          if (!target) {\n\t            for (var _i5 = 0; _i5 < overlapping.spilled.length; _i5 += 1) {\n\t              var _sim = overlapping.spilled[_i5];\n\t              if (DrawingManager.getColorString(_sim) !== currentColorString) {\n\t                continue;\n\t              }\n\t              if (!target) {\n\t                target = this.objects[overlapping.spilled[_i5]];\n\t                continue;\n\t              }\n\t              target.drawObjectComp(this.objects[_sim]);\n\t              delete this.objects[_sim];\n\t              this.objectIndexes.splice(this.objectIndexes.indexOf(_sim), 1);\n\t            }\n\t          }\n\t          target.drawObject(obj);\n\t          this.lastKey = overlapping.comp[sameIndexes[0]];\n\t        } else {\n\t          for (var _i6 = 0; _i6 < overlapping.spilled.length; _i6 += 1) {\n\t            var _sim2 = overlapping.spilled[_i6];\n\t            if (DrawingManager.getColorString(_sim2) !== currentColorString) {\n\t              continue;\n\t            }\n\t            if (!target) {\n\t              target = this.objects[overlapping.spilled[_i6]];\n\t              continue;\n\t            }\n\t            target.drawObjectComp(this.objects[_sim2]);\n\t            delete this.objects[_sim2];\n\t            this.objectIndexes.splice(this.objectIndexes.indexOf(_sim2), 1);\n\t          }\n\t\n\t          target.drawObject(obj);\n\t          this.lastKey = overlapping.spilled[sameIndexes[0]];\n\t        }\n\t      } else {\n\t        var canvas = document.createElement('canvas');\n\t        target = new _Drawing2.default(color, tool.toString(), canvas, this.styleWidth, this.styleHeight, this.showPen, this.showBase, this.showExtra);\n\t        target.drawObject(obj);\n\t        this.objectIndexes.push(key);\n\t        this.objects[key] = target;\n\t        this.lastKey = key;\n\t        if (this.clearedKey && DrawingManager.getToolString(this.clearedKey) === 'Symbol(BRUSH)' && this.objects[this.clearedKey]) {\n\t          target.history = (0, _assign2.default)({}, this.objects[this.clearedKey]);\n\t        }\n\t        this.clearedKey = null;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'erase',\n\t    value: function erase(obj, color, tool, editRange, key) {\n\t      if (!key) {\n\t        return;\n\t      }\n\t      if (key.indexOf('_overlap') === -1) {\n\t        var target = this.objects[key];\n\t        target.eraseObject(obj);\n\t        this.lastKey = key;\n\t      } else {\n\t        var k = key.split('_overlap')[0];\n\t        var _target = this.objects[k];\n\t        _target.eraseOverlapObject(obj);\n\t        this.lastKey = k;\n\t      }\n\t\n\t      this.update();\n\t      this.updateSort();\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(editRange) {\n\t      this.layers = [];\n\t      this.fixedObject.clear(editRange);\n\t      var _iteratorNormalCompletion = true;\n\t      var _didIteratorError = false;\n\t      var _iteratorError = undefined;\n\t\n\t      try {\n\t        for (var _iterator = (0, _getIterator3.default)(this.objectIndexes), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t          var key = _step.value;\n\t\n\t          var tool = DrawingManager.getToolString(key);\n\t          var target = this.objects[key];\n\t          var histories = [];\n\t          while (target.history) {\n\t            histories.push(target.history.url);\n\t            target = target.history;\n\t          }\n\t          this.layers.push({\n\t            url: this.objects[key].imageUrl,\n\t            histories: histories\n\t          });\n\t          if (tool === 'Symbol(PEN)' && this.showPen || tool === 'Symbol(BRUSH)' && (this.showBase || this.showExtra)) {\n\t            this.fixedObject.drawObject(this.objects[key], editRange);\n\t          }\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion && _iterator.return) {\n\t            _iterator.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError) {\n\t            throw _iteratorError;\n\t          }\n\t        }\n\t      }\n\t\n\t      this.layers = this.layers.reverse();\n\t    }\n\t  }, {\n\t    key: 'updateSort',\n\t    value: function updateSort() {\n\t      var _this = this;\n\t\n\t      var c1 = document.createElement('canvas');\n\t      c1.style.width = this.styleWidth;\n\t      c1.style.height = this.styleHeight;\n\t      var d1 = new _Drawing2.default(null, null, c1, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\t      var ctx1 = d1.canvas.getContext('2d');\n\t\n\t      var c2 = document.createElement('canvas');\n\t      c2.style.width = this.styleWidth;\n\t      c2.style.height = this.styleHeight;\n\t      var d2 = new _Drawing2.default(null, null, c2, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\t      var ctx2 = d2.canvas.getContext('2d');\n\t\n\t      this.objectIndexes.sort(function (key1, key2) {\n\t        var o1 = _this.objects[key1];\n\t        var o2 = _this.objects[key2];\n\t        var tool1 = key1.split(',')[0];\n\t        var tool2 = key2.split(',')[0];\n\t        if (tool1 !== tool2) {\n\t          return tool1 === 'Symbol(PEN)' ? 1 : -1;\n\t        }\n\t\n\t        var cacheKey = key1 + '-' + key2;\n\t        var cache = _this.sortCache[cacheKey];\n\t        if (cache && key1 !== _this.lastKey && key2 !== _this.lastKey) {\n\t          return cache;\n\t        }\n\t\n\t        var oc1 = o1.canvas;\n\t        var oc2 = o2.canvas;\n\t\n\t        ctx1.globalCompositeOperation = 'source-over';\n\t        ctx1.drawImage(oc1, 0, 0, _this.styleWidth / SORT_DIV, _this.styleHeight / SORT_DIV);\n\t        ctx1.globalCompositeOperation = 'source-in';\n\t        ctx1.fillStyle = '#f00';\n\t        ctx1.fillRect(0, 0, _this.styleWidth / SORT_DIV, _this.styleHeight / SORT_DIV);\n\t\n\t        ctx2.globalCompositeOperation = 'source-over';\n\t        ctx2.drawImage(oc2, 0, 0, _this.styleWidth / SORT_DIV, _this.styleHeight / SORT_DIV);\n\t        ctx2.globalCompositeOperation = 'source-in';\n\t        ctx2.fillStyle = '#00f';\n\t        ctx2.fillRect(0, 0, _this.styleWidth / SORT_DIV, _this.styleHeight / SORT_DIV);\n\t\n\t        ctx2.globalCompositeOperation = 'xor';\n\t        ctx2.drawImage(c1, 0, 0, _this.styleWidth / SORT_DIV, _this.styleHeight / SORT_DIV);\n\t\n\t        var imgdata = ctx2.getImageData(0, 0, d2.canvas.width, d2.canvas.height).data;\n\t\n\t        var _DrawingManager$measu = DrawingManager.measureArea(imgdata, d2.canvas.width, d2.canvas.height, [[255, 0, 0], [0, 0, 255]]),\n\t            _DrawingManager$measu2 = (0, _slicedToArray3.default)(_DrawingManager$measu, 2),\n\t            a = _DrawingManager$measu2[0],\n\t            b = _DrawingManager$measu2[1];\n\t\n\t        d1.clear();\n\t        d2.clear();\n\t\n\t        cache = a > b ? -1 : 1;\n\t        _this.sortCache[cacheKey] = cache;\n\t        return cache;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'checkOverlap',\n\t    value: function checkOverlap(obj, editRange) {\n\t      var result = {\n\t        comp: [],\n\t        spilled: []\n\t      };\n\t\n\t      if (!this.showBase) {\n\t        return result;\n\t      }\n\t\n\t      var c1 = document.createElement('canvas');\n\t      c1.style.width = this.styleWidth;\n\t      c1.style.height = this.styleHeight;\n\t      var d1 = new _Drawing2.default(null, null, c1, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV, false, true, false);\n\t      var ctx1 = d1.canvas.getContext('2d');\n\t\n\t      ctx1.globalCompositeOperation = 'source-over';\n\t      ctx1.drawImage(obj.canvas, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\t      ctx1.globalCompositeOperation = 'source-in';\n\t      ctx1.fillStyle = '#f00';\n\t      ctx1.fillRect(0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\t\n\t      var c2 = document.createElement('canvas');\n\t      c2.style.width = this.styleWidth;\n\t      c2.style.height = this.styleHeight;\n\t      var d2 = new _Drawing2.default(null, null, c2, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV, false, true, false);\n\t      var ctx2 = d2.canvas.getContext('2d');\n\t\n\t      for (var i = 0; i < this.objectIndexes.length; i += 1) {\n\t        var key = this.objectIndexes[i];\n\t        if (DrawingManager.getToolString(key) === 'Symbol(PEN)') {\n\t          continue;\n\t        }\n\t        var target = this.objects[this.objectIndexes[i]];\n\t\n\t        ctx2.globalCompositeOperation = 'source-over';\n\t        ctx2.drawImage(target.canvas, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\t        ctx2.globalCompositeOperation = 'source-in';\n\t        ctx2.fillStyle = '#00f';\n\t        ctx2.fillRect(0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\t\n\t        ctx2.globalCompositeOperation = 'difference';\n\t        ctx2.drawImage(c1, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\t\n\t        var imgdata = ctx2.getImageData(0, 0, d2.canvas.width, d2.canvas.height).data;\n\t\n\t        var _DrawingManager$measu3 = DrawingManager.measureArea(imgdata, d2.canvas.width, d2.canvas.height, [[255, 0, 0], [255, 0, 255], [0, 0, 255]], editRange),\n\t            _DrawingManager$measu4 = (0, _slicedToArray3.default)(_DrawingManager$measu3, 3),\n\t            a = _DrawingManager$measu4[0],\n\t            b = _DrawingManager$measu4[1],\n\t            c = _DrawingManager$measu4[2];\n\t\n\t        d2.clear();\n\t\n\t        if (a !== 0 && b !== 0 && c !== 0) {\n\t          result.spilled.push(key);\n\t        } else if ((a === 0 || c === 0) && b !== 0) {\n\t          result.comp.push(key);\n\t        }\n\t      }\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'spoit',\n\t    value: function spoit(point) {\n\t      var imgdata = this.fixedObject.canvas.getContext('2d').getImageData(0, 0, this.fixedObject.canvas.width, this.fixedObject.canvas.height).data;\n\t      return DrawingManager.spoitColor(imgdata, point, this.fixedObject.canvas.width);\n\t    }\n\t  }, {\n\t    key: 'getTopKey',\n\t    value: function getTopKey(points) {\n\t      for (var i = this.objectIndexes.length - 1; i >= 0; i -= 1) {\n\t        var key = this.objectIndexes[i];\n\t        var target = this.objects[key];\n\t        var overlap = target.overlap.getContext('2d').getImageData(0, 0, target.overlap.width, target.overlap.height).data;\n\t        if (this.showExtra && DrawingManager.filledColor(overlap, points, target.overlap.width)) {\n\t          return key + '_overlap';\n\t        }\n\t        var shape = target.shape.getContext('2d').getImageData(0, 0, target.shape.width, target.shape.height).data;\n\t        var v = !target.tool || target.tool === 'Symbol(PEN)' && target.showPen || target.tool === 'Symbol(BRUSH)' && target.showBase;\n\t        if (v && DrawingManager.filledColor(shape, points, target.shape.width)) {\n\t          return key;\n\t        }\n\t      }\n\t      return undefined;\n\t    }\n\t  }, {\n\t    key: 'clearAll',\n\t    value: function clearAll() {\n\t      this.objects = [];\n\t      this.histories = [];\n\t      this.layers = [];\n\t    }\n\t  }, {\n\t    key: 'undo',\n\t    value: function undo() {\n\t      this.objects = this.histories[this.histories.length - 1];\n\t    }\n\t  }, {\n\t    key: 'rollback',\n\t    value: function rollback(layerIdx, historyIdx) {\n\t      var length = this.objectIndexes.length;\n\t      var key = this.objectIndexes[length - layerIdx - 1];\n\t      var canvas = document.createElement('canvas');\n\t      var target = new _Drawing2.default(null, DrawingManager.getToolString(key), canvas, this.styleWidth, this.styleHeight);\n\t      var history = this.objects[key].history;\n\t      for (var i = 0; i < historyIdx; i += 1) {\n\t        history = history.history;\n\t      }\n\t      target.drawObjectComp(history);\n\t      target.history = (0, _assign2.default)({}, this.objects[key]);\n\t      this.objects[key] = target;\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'changeVisual',\n\t    value: function changeVisual(pen, base, extra) {\n\t      this.showPen = pen;\n\t      this.showBase = base;\n\t      this.showExtra = extra;\n\t      for (var i = 0; i < this.objectIndexes.length; i += 1) {\n\t        this.objects[this.objectIndexes[i]].changeVisual(pen, base, extra);\n\t      }\n\t      this.update();\n\t    }\n\t  }], [{\n\t    key: 'getKey',\n\t    value: function getKey(tool, r, g, b) {\n\t      layerIndex += 1;\n\t      var idx = tool === _Tools2.default.PEN ? 0 : layerIndex;\n\t      return tool.toString() + ',' + r + ',' + g + ',' + b + ',' + idx;\n\t    }\n\t  }, {\n\t    key: 'getToolString',\n\t    value: function getToolString(key) {\n\t      return key.split(',')[0];\n\t    }\n\t  }, {\n\t    key: 'getColorString',\n\t    value: function getColorString(key) {\n\t      return key.split(',').splice(1, 3).join(',');\n\t    }\n\t  }, {\n\t    key: 'getColor',\n\t    value: function getColor(colorString) {\n\t      return colorString.split(',').map(function (x) {\n\t        return parseInt(x, 10);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getImageDataFaster',\n\t    value: function getImageDataFaster(_x, _y, _w, d) {\n\t      var x = Math.round(_x);\n\t      var y = Math.round(_y);\n\t      var w = Math.round(_w);\n\t      var r = d[(y * w + x) * 4];\n\t      var g = d[(y * w + x) * 4 + 1];\n\t      var b = d[(y * w + x) * 4 + 2];\n\t      var a = d[(y * w + x) * 4 + 3];\n\t      return [r, g, b, a];\n\t    }\n\t  }, {\n\t    key: 'measureArea',\n\t    value: function measureArea(imgdata, width, height, targetColors, range) {\n\t      var hits = new Array(targetColors.length);\n\t      hits.fill(0);\n\t      var w = width;\n\t      var h = height;\n\t      var ox = 0;\n\t      var oy = 0;\n\t      if (range) {\n\t        w = (range.rx - range.lx) / SORT_DIV * window.devicePixelRatio;\n\t        h = (range.ry - range.ly) / SORT_DIV * window.devicePixelRatio;\n\t        ox = range.lx / SORT_DIV * window.devicePixelRatio;\n\t        oy = range.ly / SORT_DIV * window.devicePixelRatio;\n\t      }\n\t      for (var i = 0; i < MEASURE_ITER_COUNT; i += 1) {\n\t        var x = Math.round(Math.random() * (w - 1) + ox);\n\t        var y = Math.round(Math.random() * (h - 1) + oy);\n\t        var p = DrawingManager.getImageDataFaster(x, y, Math.round(width), imgdata);\n\t        for (var j = 0; j < targetColors.length; j += 1) {\n\t          var c = targetColors[j];\n\t          if (p[0] === c[0] && p[1] === c[1] && p[2] === c[2]) {\n\t            hits[j] += 1;\n\t          }\n\t        }\n\t      }\n\t      return hits;\n\t    }\n\t  }, {\n\t    key: 'filledColor',\n\t    value: function filledColor(imgdata, points, width) {\n\t      var _iteratorNormalCompletion2 = true;\n\t      var _didIteratorError2 = false;\n\t      var _iteratorError2 = undefined;\n\t\n\t      try {\n\t        for (var _iterator2 = (0, _getIterator3.default)(points), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t          var point = _step2.value;\n\t\n\t          var p = DrawingManager.getImageDataFaster(point[0], point[1], Math.round(width), imgdata);\n\t          if (!(p[0] === 0 && p[1] === 0 && p[2] === 0 && p[3] === 0)) {\n\t            return true;\n\t          }\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError2 = true;\n\t        _iteratorError2 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t            _iterator2.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError2) {\n\t            throw _iteratorError2;\n\t          }\n\t        }\n\t      }\n\t\n\t      return false;\n\t    }\n\t  }, {\n\t    key: 'spoitColor',\n\t    value: function spoitColor(imgdata, points, width) {\n\t      var _iteratorNormalCompletion3 = true;\n\t      var _didIteratorError3 = false;\n\t      var _iteratorError3 = undefined;\n\t\n\t      try {\n\t        for (var _iterator3 = (0, _getIterator3.default)(points), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t          var point = _step3.value;\n\t\n\t          var p = DrawingManager.getImageDataFaster(point[0], point[1], Math.round(width), imgdata);\n\t          if (!(p[0] === 0 && p[1] === 0 && p[2] === 0 && p[3] === 0)) {\n\t            return p;\n\t          }\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError3 = true;\n\t        _iteratorError3 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t            _iterator3.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError3) {\n\t            throw _iteratorError3;\n\t          }\n\t        }\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }, {\n\t    key: 'd',\n\t    value: function d(arr, before) {\n\t      var result = [];\n\t      var kms = [null, null];\n\t      var bics = [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY];\n\t      for (var i = 0; i < 2; i += 1) {\n\t        if (arr.cluster_arr[i].length < 2) {\n\t          continue;\n\t        }\n\t        var km = (0, _mlKmeans2.default)(arr.cluster_arr[i], 2);\n\t        var newArr = [];\n\t        newArr = newArr.concat(arr.cluster_arr[i]);\n\t        newArr = newArr.concat(arr.cluster_arr[1 - i]);\n\t        for (var j = 0; j < arr.cluster_arr[1 - i].length; j += 1) {\n\t          km.clusters.push(2);\n\t        }\n\t\n\t        var res = DrawingManager.computeBic(newArr, km);\n\t        if (res.bic > before) {\n\t          bics[i] = res.bic;\n\t          kms[i] = km;\n\t        }\n\t      }\n\t\n\t      if (bics[0] > before || bics[1] > before) {\n\t        for (var _i7 = 0; _i7 < 2; _i7 += 1) {\n\t          if (bics[_i7] > before) {\n\t            var _km = kms[_i7];\n\t            var clusters = new Array(2);\n\t            for (var k = 0; k < _km.clusters.length; k += 1) {\n\t              if (!clusters[_km.clusters[k]]) {\n\t                clusters[_km.clusters[k]] = [];\n\t              }\n\t              clusters[_km.clusters[k]].push(arr.cluster_arr[_i7][k]);\n\t            }\n\t            _km.arr = arr.cluster_arr[_i7];\n\t            _km.cluster_arr = clusters;\n\t            result = result.concat(DrawingManager.d(_km, bics[_i7]));\n\t          } else {\n\t            result.push(arr.cluster_arr[_i7]);\n\t          }\n\t        }\n\t      } else {\n\t        result.push([].concat(arr.cluster_arr[0], arr.cluster_arr[1]));\n\t      }\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'divide',\n\t    value: function divide(arr) {\n\t      if (arr.length < 2) {\n\t        return [arr];\n\t      }\n\t      var km = (0, _mlKmeans2.default)(arr, 2);\n\t      var clusters = new Array(2);\n\t      for (var i = 0; i < km.clusters.length; i += 1) {\n\t        if (!clusters[km.clusters[i]]) {\n\t          clusters[km.clusters[i]] = [];\n\t        }\n\t        clusters[km.clusters[i]].push(arr[i]);\n\t      }\n\t      if (!clusters[1]) {\n\t        return [arr];\n\t      }\n\t\n\t      km.arr = arr;\n\t      km.cluster_arr = clusters;\n\t      var res = DrawingManager.computeBic(arr, km);\n\t      var resClusters = DrawingManager.d(km, res.bic);\n\t      return resClusters;\n\t    }\n\t  }, {\n\t    key: 'computeBic',\n\t    value: function computeBic(arr, km) {\n\t      var centers = km.centroids.map(function (x) {\n\t        return x.centroid;\n\t      });\n\t      var labels = km.clusters;\n\t      var m = km.centroids.length;\n\t      var n = km.centroids.map(function (x) {\n\t        return x.size;\n\t      });\n\t      var N = arr.length;\n\t      var d = arr[0].length;\n\t\n\t      var clusters = new Array(m);\n\t      for (var i = 0; i < km.clusters.length; i += 1) {\n\t        if (!clusters[km.clusters[i]]) {\n\t          clusters[km.clusters[i]] = [];\n\t        }\n\t        clusters[km.clusters[i]].push(arr[i]);\n\t      }\n\t\n\t      var s = 0;\n\t      for (var _i8 = 0; _i8 < m; _i8 += 1) {\n\t        for (var j = 0; j < N; j += 1) {\n\t          if (_i8 === labels[j]) {\n\t            s += _mlDistance2.default.distance.euclidean(arr[j], centers[_i8]);\n\t          }\n\t        }\n\t      }\n\t      var clVar = 1.0 / (N - m) / d * s;\n\t      var constTerm = 0.5 * m * Math.log(N) * (d + 1);\n\t      if (!clVar) {\n\t        return { clusters: clusters, centers: centers, bic: Number.NEGATIVE_INFINITY };\n\t      }\n\t      var bic = 0;\n\t      for (var _i9 = 0; _i9 < m; _i9 += 1) {\n\t        var b = n[_i9];\n\t\n\t        bic += b * Math.log(b) - b * Math.log(N) - b * d / 2 * Math.log(2 * Math.PI * clVar) - (b - 1) * d / 2;\n\t      }\n\t      bic -= constTerm;\n\t      return { clusters: clusters, centers: centers, bic: bic };\n\t    }\n\t  }]);\n\t  return DrawingManager;\n\t}();\n\t\n\texports.default = DrawingManager;\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _from = __webpack_require__(64);\n\t\n\tvar _from2 = _interopRequireDefault(_from);\n\t\n\tvar _vueColor = __webpack_require__(175);\n\t\n\tvar _vue = __webpack_require__(24);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _color = __webpack_require__(31);\n\t\n\tvar _color2 = _interopRequireDefault(_color);\n\t\n\tvar _vueMaterial = __webpack_require__(184);\n\t\n\tvar _vueMaterial2 = _interopRequireDefault(_vueMaterial);\n\t\n\t__webpack_require__(113);\n\t\n\tvar _UiCanvas = __webpack_require__(177);\n\t\n\tvar _UiCanvas2 = _interopRequireDefault(_UiCanvas);\n\t\n\tvar _UiSlider = __webpack_require__(179);\n\t\n\tvar _UiSlider2 = _interopRequireDefault(_UiSlider);\n\t\n\tvar _UiLayerList = __webpack_require__(178);\n\t\n\tvar _UiLayerList2 = _interopRequireDefault(_UiLayerList);\n\t\n\tvar _DrawingManager = __webpack_require__(59);\n\t\n\tvar _DrawingManager2 = _interopRequireDefault(_DrawingManager);\n\t\n\tvar _Tools = __webpack_require__(10);\n\t\n\tvar _Tools2 = _interopRequireDefault(_Tools);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_vueMaterial2.default);\n\t\n\tvar currentColor = {\n\t  hex: '#4A4A4A',\n\t  rgba: {\n\t    r: 74,\n\t    g: 74,\n\t    b: 74,\n\t    a: 1\n\t  },\n\t  a: 1\n\t};\n\t\n\tvar currentTool = _Tools2.default.PEN;\n\tvar prevTool = currentTool;\n\tvar toolSizes = {};\n\ttoolSizes[_Tools2.default.PEN] = 4;\n\ttoolSizes[_Tools2.default.BRUSH] = 30;\n\ttoolSizes[_Tools2.default.ERASER] = 30;\n\t\n\texports.default = {\n\t  name: 'app',\n\t  components: {\n\t    Sketch: _vueColor.Sketch,\n\t    UiCanvas: _UiCanvas2.default,\n\t    UiLayerList: _UiLayerList2.default,\n\t    UiSlider: _UiSlider2.default\n\t  },\n\t  data: function data() {\n\t    return {\n\t      currentColor: currentColor,\n\t      currentTool: currentTool,\n\t      prevTool: prevTool,\n\t      toolSizes: toolSizes,\n\t      drawingManager: undefined,\n\t      defaultSize: 4,\n\t      tuneTargetKey: undefined,\n\t      tuneTarget: undefined,\n\t      tuneInfo: undefined,\n\t      tuneShape: undefined,\n\t      tuneOverlap: undefined,\n\t      showPen: true,\n\t      showBase: true,\n\t      showExtra: true,\n\t      showPalette: true\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    window.devicePixelRatio = 1.0;\n\t    this.drawingManager = new _DrawingManager2.default(document.querySelector('#fixed-canvas'));\n\t\n\t    var count = 0;\n\t    var startTime = 0;\n\t    var counter = function counter() {\n\t      count += 1;\n\t      if (new Date().getTime() - startTime > 1000) {\n\t        document.title = '(FPS: ' + count + ')';\n\t        count = 0;\n\t        startTime = new window.Date().getTime();\n\t      }\n\t      window.requestAnimationFrame(counter);\n\t    };\n\t    window.requestAnimationFrame(counter);\n\t  },\n\t\n\t  methods: {\n\t    onchange: function onchange(color) {\n\t      this.currentColor = color;\n\t    },\n\t    toggletool: function toggletool(tool) {\n\t      this.prevTool = this.currentTool;\n\t      this.currentTool = _Tools2.default.fromName(tool);\n\t      this.$refs.slider.setValue(this.toolSizes[this.currentTool], true, false);\n\t    },\n\t    onchangesize: function onchangesize(size) {\n\t      this.toolSizes[this.currentTool] = size;\n\t    },\n\t    onextractcolor: function onextractcolor(color) {\n\t      this.$refs.colorPicker.colorChange({\n\t        hex: _color2.default.rgb(color).hex(),\n\t        rgba: {\n\t          r: color[0],\n\t          g: color[1],\n\t          b: color[2],\n\t          a: 1\n\t        },\n\t        a: 1\n\t      });\n\t    },\n\t    newcanvas: function newcanvas() {\n\t      this.drawingManager = new _DrawingManager2.default(document.querySelector('#fixed-canvas'));\n\t      this.currentColor = currentColor;\n\t      this.currentTool = currentTool;\n\t      this.$refs.slider.setValue(this.defaultSize, true, false);\n\t      (0, _from2.default)(this.$refs.toolButtons.$el.children).map(function (x) {\n\t        return x.classList.remove('md-toggle');\n\t      });\n\t\n\t      this.$refs.penButton.$el.classList.add('md-toggle');\n\t      this.showPen = true;\n\t      this.showBase = true;\n\t      this.showExtra = true;\n\t      this.showPalette = true;\n\t    },\n\t    onclear: function onclear(index) {\n\t      if (this.drawingManager) {\n\t        var length = this.drawingManager.objectIndexes.length;\n\t        var clearedKey = this.drawingManager.objectIndexes.splice(length - index - 1, 1)[0];\n\t        this.drawingManager.clearedKey = clearedKey;\n\t        this.drawingManager.update();\n\t      }\n\t    },\n\t    rollback: function rollback(layerIdx, historyIdx) {\n\t      this.drawingManager.rollback(layerIdx, historyIdx);\n\t    },\n\t    openColorDialog: function openColorDialog() {\n\t      this.$refs.hueSlider.setValue(50, true, false);\n\t      this.$refs.satSlider.setValue(50, true, false);\n\t      this.$refs.valSlider.setValue(50, true, false);\n\t      this.$refs.colorDialog.open();\n\t    },\n\t    closeColorDialog: function closeColorDialog() {\n\t      var shape = new Uint8ClampedArray(this.tuneShape.data);\n\t      shape.set(this.tuneShape);\n\t      var ps = new window.ImageData(shape, this.tuneTarget.shape.width, this.tuneTarget.shape.height);\n\t      this.tuneTarget.shape.getContext('2d').putImageData(ps, 0, 0);\n\t      var overlap = new Uint8ClampedArray(this.tuneOverlap.data);\n\t      overlap.set(this.tuneOverlap);\n\t      var po = new window.ImageData(overlap, this.tuneTarget.overlap.width, this.tuneTarget.overlap.height);\n\t      this.tuneTarget.overlap.getContext('2d').putImageData(po, 0, 0);\n\t      this.tuneTarget.url = null;\n\t      this.tuneTarget.updateCanvas();\n\t      this.drawingManager.update();\n\t      this.$refs.colorDialog.close();\n\t    },\n\t    applyColorDialog: function applyColorDialog() {\n\t      var targetTool = _DrawingManager2.default.getToolString(this.tuneTargetKey);\n\t      var targetColor = _DrawingManager2.default.getColor(_DrawingManager2.default.getColorString(this.tuneTargetKey));\n\t      var newColor = _color2.default.rgb(targetColor).rotate(this.tuneInfo.hue).saturate(this.tuneInfo.sat).lighten(this.tuneInfo.val).rgb().array();\n\t      newColor = newColor.map(function (x) {\n\t        return Math.floor(x);\n\t      });\n\t      var newKey = _DrawingManager2.default.getKey(targetTool, Math.floor(newColor[0]), Math.floor(newColor[1]), Math.floor(newColor[2]));\n\t      var idx = this.drawingManager.objectIndexes.indexOf(this.tuneTargetKey);\n\t      if (idx === -1) {\n\t        return;\n\t      }\n\t      this.drawingManager.objectIndexes[idx] = newKey;\n\t      this.drawingManager.objects[newKey] = this.tuneTarget;\n\t      delete this.drawingManager.objects[this.tuneTargetKey];\n\t      this.drawingManager.update();\n\t      this.$refs.colorDialog.close();\n\t    },\n\t    ontune: function ontune(targetKey) {\n\t      this.tuneTargetKey = targetKey;\n\t      this.tuneTarget = this.drawingManager.objects[targetKey];\n\t      this.tuneInfo = {\n\t        hue: 0.0,\n\t        sat: 0.0,\n\t        val: 0.0\n\t      };\n\t      this.tuneShape = this.tuneTarget.shape.getContext('2d').getImageData(0, 0, this.tuneTarget.shape.width, this.tuneTarget.shape.height);\n\t      this.tuneOverlap = this.tuneTarget.overlap.getContext('2d').getImageData(0, 0, this.tuneTarget.overlap.width, this.tuneTarget.overlap.height);\n\t      this.openColorDialog();\n\t    },\n\t    onchangehue: function onchangehue(hue) {\n\t      this.tuneInfo.hue = (hue - 50) / 100 * 360;\n\t      this.colorTune();\n\t    },\n\t    onchangesat: function onchangesat(sat) {\n\t      this.tuneInfo.sat = (sat - 50) / 100;\n\t      this.colorTune();\n\t    },\n\t    onchangeval: function onchangeval(val) {\n\t      this.tuneInfo.val = (val - 50) / 100;\n\t      this.colorTune();\n\t    },\n\t    colorTune: function colorTune() {\n\t      this.tuneTarget.colorTune(this.tuneShape, this.tuneOverlap, this.tuneInfo);\n\t      this.drawingManager.update();\n\t    },\n\t    onchangevisiual: function onchangevisiual() {\n\t      this.drawingManager.changeVisual(this.showPen, this.showBase, this.showExtra);\n\t    },\n\t    togglepalette: function togglepalette() {\n\t      this.showPalette = !this.showPalette;\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray2 = __webpack_require__(14);\n\t\n\tvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\t\n\tvar _Drawing = __webpack_require__(25);\n\t\n\tvar _Drawing2 = _interopRequireDefault(_Drawing);\n\t\n\tvar _Tools = __webpack_require__(10);\n\t\n\tvar _Tools2 = _interopRequireDefault(_Tools);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar getMousePos = function getMousePos(event) {\n\t  var rect = event.target.getBoundingClientRect();\n\t  var clientX = event.clientX || event.touches[0].clientX;\n\t  var clientY = event.clientY || event.touches[0].clientY;\n\t  return [clientX - rect.left, clientY - rect.top];\n\t};\n\t\n\texports.default = {\n\t  name: 'UiCanvas',\n\t  props: ['current-color', 'current-tool', 'prev-tool', 'tool-sizes', 'drawing-manager'],\n\t  data: function data() {\n\t    return {\n\t      currentStroke: [],\n\t      drawing: null,\n\t      editRange: { lx: 0, ly: 0, rx: 0, ry: 0 },\n\t      eraseTarget: undefined\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    this.$refs.drawing.addEventListener('dragover', this.dragover, false);\n\t    this.$refs.drawing.addEventListener('drop', this.drop, false);\n\t  },\n\t\n\t  methods: {\n\t    mousedown: function mousedown(event) {\n\t      event.preventDefault();\n\t\n\t      var _getMousePos = getMousePos(event),\n\t          _getMousePos2 = (0, _slicedToArray3.default)(_getMousePos, 2),\n\t          mousex = _getMousePos2[0],\n\t          mousey = _getMousePos2[1];\n\t\n\t      var firstTarget = void 0;\n\t      var color = void 0;\n\t      switch (this.currentTool) {\n\t        case _Tools2.default.PEN:\n\t        case _Tools2.default.BRUSH:\n\t        case _Tools2.default.ERASER:\n\t          this.drawing = new _Drawing2.default(this.currentColor, null, document.querySelector('#drawing'));\n\t          break;\n\t        case _Tools2.default.SPOIT:\n\t          color = this.drawingManager.spoit([[mousex * window.devicePixelRatio, mousey * window.devicePixelRatio]]);\n\t          if (color) {\n\t            this.$emit('onextractcolor', color);\n\t          }\n\t          return;\n\t        case _Tools2.default.FILL:\n\t          return;\n\t        case _Tools2.default.COLOR:\n\t          firstTarget = this.drawingManager.getTopKey([[mousex * window.devicePixelRatio, mousey * window.devicePixelRatio]]);\n\t          if (firstTarget) {\n\t            this.$emit('ontune', firstTarget.split('_overlap')[0]);\n\t          }\n\t          return;\n\t        default:\n\t          return;\n\t      }\n\t      var size = this.toolSizes[this.currentTool];\n\t      this.currentStroke.push([mousex, mousey]);\n\t      this.drawing.draw(this.currentStroke, this.currentColor, this.currentTool, size);\n\t\n\t      this.editRange.lx = mousex - size;\n\t      this.editRange.ly = mousey - size;\n\t      this.editRange.rx = mousex + size;\n\t      this.editRange.ry = mousey + size;\n\t\n\t      this.updateerasertarget(mousex * window.devicePixelRatio, mousey * window.devicePixelRatio);\n\t    },\n\t    mousemove: function mousemove(event) {\n\t      event.preventDefault();\n\t      if (!this.drawing) {\n\t        return;\n\t      }\n\t\n\t      var _currentStroke = (0, _slicedToArray3.default)(this.currentStroke[this.currentStroke.length - 1], 2),\n\t          pmousex = _currentStroke[0],\n\t          pmousey = _currentStroke[1];\n\t\n\t      var _getMousePos3 = getMousePos(event),\n\t          _getMousePos4 = (0, _slicedToArray3.default)(_getMousePos3, 2),\n\t          mousex = _getMousePos4[0],\n\t          mousey = _getMousePos4[1];\n\t\n\t      if (mousex === pmousex && mousey === pmousey) {\n\t        return;\n\t      }\n\t      var size = this.toolSizes[this.currentTool];\n\t      this.currentStroke.push([mousex, mousey]);\n\t      this.drawing.clear(this.editRange);\n\t      this.drawing.draw(this.currentStroke, this.currentColor, this.currentTool, size);\n\t\n\t      this.editRange.lx = Math.min(mousex - size, this.editRange.lx);\n\t      this.editRange.ly = Math.min(mousey - size, this.editRange.ly);\n\t      this.editRange.rx = Math.max(mousex + size, this.editRange.rx);\n\t      this.editRange.ry = Math.max(mousey + size, this.editRange.ry);\n\t\n\t      this.updateerasertarget(mousex * window.devicePixelRatio, mousey * window.devicePixelRatio);\n\t    },\n\t    mouseup: function mouseup(event) {\n\t      event.preventDefault();\n\t      if (!this.drawing) {\n\t        return;\n\t      }\n\t      switch (this.currentTool) {\n\t        case _Tools2.default.PEN:\n\t        case _Tools2.default.BRUSH:\n\t          this.drawingManager.draw(this.drawing, this.currentColor, this.currentTool, this.editRange);\n\t          break;\n\t        case _Tools2.default.ERASER:\n\t          this.drawingManager.erase(this.drawing, this.currentColor, this.currentTool, this.editRange, this.eraseTarget);\n\t          break;\n\t        case _Tools2.default.SPOIT:\n\t          return;\n\t        case _Tools2.default.FILL:\n\t          return;\n\t        default:\n\t          return;\n\t      }\n\t      this.drawing.clear(this.editRange);\n\t      this.drawing = null;\n\t      this.currentStroke = [];\n\t      this.editRange = { lx: 0, ly: 0, rx: 0, ry: 0 };\n\t      this.eraseTarget = undefined;\n\t      this.$parent.$emit('update-layer-list');\n\t    },\n\t    updateerasertarget: function updateerasertarget(mousex, mousey) {\n\t      var size = this.toolSizes[this.currentTool];\n\t      if (this.currentTool === _Tools2.default.ERASER && !this.eraseTarget) {\n\t        var points = [];\n\t        points.push([mousex, mousey]);\n\t        for (var i = 0; i < 16; i += 1) {\n\t          points.push([mousex + 0.5 * size * Math.cos(2 * Math.PI / 16 * i), mousey + 0.5 * size * Math.sin(2 * Math.PI / 16 * i)]);\n\t        }\n\t        var target = this.drawingManager.getTopKey(points);\n\t        if (target) {\n\t          this.eraseTarget = target;\n\t        }\n\t      }\n\t    },\n\t    dragover: function dragover(event) {\n\t      event.preventDefault();\n\t    },\n\t    drop: function drop(event) {\n\t      var _this = this;\n\t\n\t      event.preventDefault();\n\t      var file = event.dataTransfer.files[0];\n\t      if (file.type !== 'image/png' && file.type !== 'image/jpeg') {\n\t        return;\n\t      }\n\t\n\t      var reader = new FileReader();\n\t      reader.onload = function () {\n\t        var image = document.createElement('img');\n\t        image.setAttribute('src', reader.result);\n\t        _this.drawing = new _Drawing2.default(_this.currentColor, null, document.querySelector('#drawing'));\n\t        _this.drawing.drawObject({ canvas: image });\n\t        _this.drawingManager.draw(_this.drawing, _this.currentColor, _this.currentTool, _this.editRange);\n\t      };\n\t      reader.readAsDataURL(file);\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  name: 'UiLayerList',\n\t  props: ['layers'],\n\t  data: function data() {\n\t    return {\n\t      active: -1\n\t    };\n\t  },\n\t\n\t  methods: {\n\t    clear: function clear(index) {\n\t      this.$emit('onclear', index);\n\t    },\n\t    mouseover: function mouseover(index) {\n\t      this.active = index;\n\t    },\n\t    mouseleave: function mouseleave(index) {\n\t      if (index === this.active) {\n\t        this.active = -1;\n\t      }\n\t    },\n\t    rollback: function rollback(layerIdx, historyIdx) {\n\t      this.$emit('rollback', layerIdx, historyIdx);\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _draggabilly = __webpack_require__(107);\n\t\n\tvar _draggabilly2 = _interopRequireDefault(_draggabilly);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  name: 'UiSlider',\n\t  props: ['defaultValue'],\n\t  data: function data() {\n\t    return {\n\t      keyboardStep: 5,\n\t      value: this.defaultValue,\n\t      dragging: false,\n\t      draggable: null\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    this.$refs.thumb.style.left = this.value + '%';\n\t\n\t    this.draggable = new _draggabilly2.default(this.$refs.thumb, {\n\t      containment: this.$refs.container,\n\t      axis: 'x'\n\t    });\n\t\n\t    this.draggable.on('dragStart', this.dragStart);\n\t    this.draggable.on('dragMove', this.dragMove);\n\t    this.draggable.on('dragEnd', this.dragEnd);\n\t  },\n\t\n\t  methods: {\n\t    sliderClick: function sliderClick(e) {\n\t      var sliderPosition = this.$refs.slider.getBoundingClientRect();\n\t\n\t      var newValue = (e.clientX - sliderPosition.left) / sliderPosition.width * 100;\n\t\n\t      this.setValue(newValue, true);\n\t\n\t      if (e.target !== this.$refs.thumb) {\n\t        this.draggable._pointerDown(e, e);\n\t      }\n\t\n\t      this.$refs.slider.focus();\n\t    },\n\t    dragStart: function dragStart() {\n\t      this.dragging = true;\n\t      this.$refs.slider.focus();\n\t    },\n\t    dragMove: function dragMove() {\n\t      var x = this.draggable.position.x;\n\t      var newValue = x / this.$refs.slider.getBoundingClientRect().width * 100;\n\t\n\t      this.setValue(newValue);\n\t    },\n\t    dragEnd: function dragEnd() {\n\t      this.dragging = false;\n\t    },\n\t    increment: function increment() {\n\t      if (this.value === 100) {\n\t        return;\n\t      }\n\t\n\t      this.setValue(this.value + this.keyboardStep, true);\n\t    },\n\t    decrement: function decrement() {\n\t      if (this.value === 0) {\n\t        return;\n\t      }\n\t\n\t      this.setValue(this.value - this.keyboardStep, true);\n\t    },\n\t    setValue: function setValue(newValue, updateThumb) {\n\t      var emit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\t\n\t      if (newValue === this.value) {\n\t        return;\n\t      }\n\t\n\t      var moderatedValue = Math.round(newValue);\n\t\n\t      if (moderatedValue >= 100) {\n\t        moderatedValue = 100;\n\t      }\n\t\n\t      if (moderatedValue <= 0) {\n\t        moderatedValue = 0;\n\t      }\n\t\n\t      this.value = moderatedValue;\n\t\n\t      if (updateThumb) {\n\t        this.$refs.thumb.style.left = this.value + '%';\n\t      }\n\t      if (emit) {\n\t        this.$emit('change-value', this.value);\n\t      }\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 109:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 110:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 111:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 112:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 113:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 176:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(111)\n\t\n\tvar Component = __webpack_require__(13)(\n\t  /* script */\n\t  __webpack_require__(60),\n\t  /* template */\n\t  __webpack_require__(182),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 177:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(109)\n\t\n\tvar Component = __webpack_require__(13)(\n\t  /* script */\n\t  __webpack_require__(61),\n\t  /* template */\n\t  __webpack_require__(180),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 178:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(112)\n\t\n\tvar Component = __webpack_require__(13)(\n\t  /* script */\n\t  __webpack_require__(62),\n\t  /* template */\n\t  __webpack_require__(183),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 179:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(110)\n\t\n\tvar Component = __webpack_require__(13)(\n\t  /* script */\n\t  __webpack_require__(63),\n\t  /* template */\n\t  __webpack_require__(181),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 180:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"ui-canvas\"\n\t    }\n\t  }, [_c('canvas', {\n\t    attrs: {\n\t      \"id\": \"fixed-canvas\"\n\t    }\n\t  }), _vm._v(\" \"), _c('canvas', {\n\t    ref: \"drawing\",\n\t    attrs: {\n\t      \"id\": \"drawing\"\n\t    },\n\t    on: {\n\t      \"mousedown\": _vm.mousedown,\n\t      \"touchstart\": _vm.mousedown,\n\t      \"mousemove\": _vm.mousemove,\n\t      \"touchmove\": _vm.mousemove,\n\t      \"mouseup\": _vm.mouseup,\n\t      \"touchend\": _vm.mouseup,\n\t      \"mouseleave\": _vm.mouseup\n\t    }\n\t  })])\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 181:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    ref: \"slider\",\n\t    staticClass: \"ui-slider\",\n\t    class: {\n\t      min: _vm.value === 0, max: _vm.value === 100, dragging: _vm.dragging\n\t    },\n\t    attrs: {\n\t      \"tabindex\": \"0\"\n\t    },\n\t    on: {\n\t      \"mousedown\": _vm.sliderClick,\n\t      \"keydown\": [function($event) {\n\t        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, \"left\", 37, $event.key, [\"Left\", \"ArrowLeft\"])) { return null; }\n\t        if ('button' in $event && $event.button !== 0) { return null; }\n\t        $event.preventDefault();\n\t        return _vm.decrement($event)\n\t      }, function($event) {\n\t        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, \"right\", 39, $event.key, [\"Right\", \"ArrowRight\"])) { return null; }\n\t        if ('button' in $event && $event.button !== 2) { return null; }\n\t        $event.preventDefault();\n\t        return _vm.increment($event)\n\t      }]\n\t    }\n\t  }, [_c('div', {\n\t    ref: \"container\",\n\t    staticClass: \"ui-slider-containment\"\n\t  }), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"ui-slider-wrapper\"\n\t  }, [_c('div', {\n\t    staticClass: \"ui-slider-track-container\"\n\t  }, [_c('div', {\n\t    staticClass: \"ui-slider-track\"\n\t  }), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"ui-slider-track-fill\",\n\t    style: ({\n\t      width: _vm.value + '%'\n\t    })\n\t  })]), _vm._v(\" \"), _c('div', {\n\t    ref: \"thumb\",\n\t    staticClass: \"ui-slider-thumb-container\"\n\t  }, [_c('div', {\n\t    staticClass: \"ui-slider-focus-ring\"\n\t  }), _vm._v(\" \"), _c('div', {\n\t    ref: \"thumbCircle\",\n\t    staticClass: \"ui-slider-thumb\"\n\t  })])])])\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 182:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"app\"\n\t    }\n\t  }, [_c('ui-canvas', {\n\t    attrs: {\n\t      \"current-color\": _vm.currentColor,\n\t      \"current-tool\": _vm.currentTool,\n\t      \"prev-tool\": _vm.prevTool,\n\t      \"tool-sizes\": _vm.toolSizes,\n\t      \"drawing-manager\": _vm.drawingManager\n\t    },\n\t    on: {\n\t      \"ontune\": _vm.ontune,\n\t      \"onextractcolor\": _vm.onextractcolor\n\t    }\n\t  }), _vm._v(\" \"), _c('div', {\n\t    directives: [{\n\t      name: \"show\",\n\t      rawName: \"v-show\",\n\t      value: (_vm.showPalette),\n\t      expression: \"showPalette\"\n\t    }],\n\t    staticClass: \"palette\"\n\t  }, [_c('sketch', {\n\t    ref: \"colorPicker\",\n\t    attrs: {\n\t      \"id\": \"color-picker\"\n\t    },\n\t    on: {\n\t      \"change-color\": _vm.onchange\n\t    },\n\t    model: {\n\t      value: (_vm.currentColor),\n\t      callback: function($$v) {\n\t        _vm.currentColor = $$v\n\t      },\n\t      expression: \"currentColor\"\n\t    }\n\t  }), _vm._v(\" \"), _c('ui-slider', {\n\t    ref: \"slider\",\n\t    attrs: {\n\t      \"defaultValue\": _vm.defaultSize\n\t    },\n\t    on: {\n\t      \"change-value\": _vm.onchangesize\n\t    }\n\t  })], 1), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"layer-box\"\n\t    }\n\t  }, [(_vm.drawingManager) ? _c('ui-layer-list', {\n\t    staticClass: \"layer-list\",\n\t    attrs: {\n\t      \"layers\": _vm.drawingManager.layers\n\t    },\n\t    on: {\n\t      \"onclear\": _vm.onclear,\n\t      \"rollback\": _vm.rollback\n\t    }\n\t  }) : _vm._e(), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"show-layer-box\"\n\t    }\n\t  }, [_c('md-switch', {\n\t    on: {\n\t      \"change\": _vm.onchangevisiual\n\t    },\n\t    model: {\n\t      value: (_vm.showPen),\n\t      callback: function($$v) {\n\t        _vm.showPen = $$v\n\t      },\n\t      expression: \"showPen\"\n\t    }\n\t  }, [_vm._v(\"\")]), _vm._v(\" \"), _c('md-switch', {\n\t    on: {\n\t      \"change\": _vm.onchangevisiual\n\t    },\n\t    model: {\n\t      value: (_vm.showBase),\n\t      callback: function($$v) {\n\t        _vm.showBase = $$v\n\t      },\n\t      expression: \"showBase\"\n\t    }\n\t  }, [_vm._v(\"\")]), _vm._v(\" \"), _c('md-switch', {\n\t    on: {\n\t      \"change\": _vm.onchangevisiual\n\t    },\n\t    model: {\n\t      value: (_vm.showExtra),\n\t      callback: function($$v) {\n\t        _vm.showExtra = $$v\n\t      },\n\t      expression: \"showExtra\"\n\t    }\n\t  }, [_vm._v(\"\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"canvas-box\"\n\t    }\n\t  }, [_c('md-button', {\n\t    staticClass: \"md-fab\",\n\t    on: {\n\t      \"click\": _vm.newcanvas\n\t    }\n\t  }, [_c('md-icon', [_vm._v(\"note_add\")])], 1), _vm._v(\" \"), _c('md-button', {\n\t    staticClass: \"md-fab md-mini\",\n\t    on: {\n\t      \"click\": _vm.togglepalette\n\t    }\n\t  }, [_c('md-icon', [_vm._v(\"palette\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"tool-box\"\n\t    }\n\t  }, [_c('md-button-toggle', {\n\t    ref: \"toolButtons\",\n\t    staticClass: \"md-accent\",\n\t    attrs: {\n\t      \"md-single\": \"\"\n\t    }\n\t  }, [_c('md-button', {\n\t    ref: \"penButton\",\n\t    staticClass: \"md-icon-button md-toggle\",\n\t    on: {\n\t      \"click\": function($event) {\n\t        return _vm.toggletool(\"pen\")\n\t      }\n\t    }\n\t  }, [_c('md-icon', [_vm._v(\"edit\")])], 1), _vm._v(\" \"), _c('md-button', {\n\t    ref: \"brushButton\",\n\t    staticClass: \"md-icon-button\",\n\t    on: {\n\t      \"click\": function($event) {\n\t        return _vm.toggletool(\"brush\")\n\t      }\n\t    }\n\t  }, [_c('md-icon', [_vm._v(\"brush\")])], 1), _vm._v(\" \"), _c('md-button', {\n\t    staticClass: \"md-icon-button\",\n\t    on: {\n\t      \"click\": function($event) {\n\t        return _vm.toggletool(\"eraser\")\n\t      }\n\t    }\n\t  }, [_c('md-icon', [_vm._v(\"call_to_action\")])], 1), _vm._v(\" \"), _c('md-button', {\n\t    staticClass: \"md-icon-button\",\n\t    on: {\n\t      \"click\": function($event) {\n\t        return _vm.toggletool(\"spoit\")\n\t      }\n\t    }\n\t  }, [_c('md-icon', [_vm._v(\"colorize\")])], 1), _vm._v(\" \"), _c('md-button', {\n\t    staticClass: \"md-icon-button\",\n\t    on: {\n\t      \"click\": function($event) {\n\t        return _vm.toggletool(\"color\")\n\t      }\n\t    }\n\t  }, [_c('md-icon', [_vm._v(\"tune\")])], 1)], 1)], 1), _vm._v(\" \"), _c('md-dialog', {\n\t    ref: \"colorDialog\",\n\t    attrs: {\n\t      \"id\": \"color-dialog\"\n\t    }\n\t  }, [_c('md-dialog-title', [_vm._v(\"\")]), _vm._v(\" \"), _c('md-dialog-content', [_vm._v(\"\\n      \\n      \"), _c('ui-slider', {\n\t    ref: \"hueSlider\",\n\t    attrs: {\n\t      \"defaultValue\": 50\n\t    },\n\t    on: {\n\t      \"change-value\": _vm.onchangehue\n\t    }\n\t  }), _vm._v(\"\\n      \\n      \"), _c('ui-slider', {\n\t    ref: \"satSlider\",\n\t    attrs: {\n\t      \"defaultValue\": 50\n\t    },\n\t    on: {\n\t      \"change-value\": _vm.onchangesat\n\t    }\n\t  }), _vm._v(\"\\n      \\n      \"), _c('ui-slider', {\n\t    ref: \"valSlider\",\n\t    attrs: {\n\t      \"defaultValue\": 50\n\t    },\n\t    on: {\n\t      \"change-value\": _vm.onchangeval\n\t    }\n\t  })], 1), _vm._v(\" \"), _c('md-dialog-actions', [_c('md-button', {\n\t    staticClass: \"md-primary\",\n\t    on: {\n\t      \"click\": _vm.closeColorDialog\n\t    }\n\t  }, [_vm._v(\"\")]), _vm._v(\" \"), _c('md-button', {\n\t    staticClass: \"md-primary\",\n\t    on: {\n\t      \"click\": _vm.applyColorDialog\n\t    }\n\t  }, [_vm._v(\"\")])], 1)], 1)], 1)\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 183:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"ui-layer-list\"\n\t    }\n\t  }, [(_vm.layers) ? _c('ul', _vm._l((_vm.layers), function(layer, i) {\n\t    return _c('li', {\n\t      on: {\n\t        \"mouseover\": function($event) {\n\t          return _vm.mouseover(i)\n\t        },\n\t        \"mouseleave\": function($event) {\n\t          return _vm.mouseleave(i)\n\t        }\n\t      }\n\t    }, [_c('md-button', {\n\t      on: {\n\t        \"click\": function($event) {\n\t          return _vm.clear(i)\n\t        }\n\t      }\n\t    }, [_c('md-icon', [_vm._v(\"clear\")])], 1), _vm._v(\" \"), _c('img', {\n\t      attrs: {\n\t        \"src\": layer.url\n\t      }\n\t    }), _vm._v(\" \"), (layer.histories && _vm.active === i) ? _c('ul', _vm._l((layer.histories), function(history, j) {\n\t      return _c('li', {\n\t        staticStyle: {\n\t          \"display\": \"inline\"\n\t        }\n\t      }, [_c('img', {\n\t        attrs: {\n\t          \"src\": history\n\t        },\n\t        on: {\n\t          \"click\": function($event) {\n\t            return _vm.rollback(i, j)\n\t          }\n\t        }\n\t      })])\n\t    }), 0) : _vm._e()], 1)\n\t  }), 0) : _vm._e()])\n\t},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/app.d6d34767d79a4d900248.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport App from './App';\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","const tools = {\n  PEN: window.Symbol('PEN'),\n  BRUSH: window.Symbol('BRUSH'),\n  ERASER: window.Symbol('ERASER'),\n  SPOIT: window.Symbol('SPOIT'),\n  FILL: window.Symbol('FILL'),\n  COLOR: window.Symbol('COLOR'),\n  fromName: (name) => {\n    switch (name) {\n      case 'pen':\n        return tools.PEN;\n      case 'brush':\n        return tools.BRUSH;\n      case 'eraser':\n        return tools.ERASER;\n      case 'spoit':\n        return tools.SPOIT;\n      case 'fill':\n        return tools.FILL;\n      case 'color':\n        return tools.COLOR;\n      default:\n        return undefined;\n    }\n  },\n};\n\nexport default tools;\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs/Tools.js","import Color from 'color';\nimport tools from '../libs/Tools';\n\nclass Drawing {\n  constructor(mainColor, tool, canvas,\n    width = 0, height = 0, showPen = true, showBase = true, showExtra = true) {\n    this.mainColor = mainColor;\n    this.tool = tool;\n    this.canvas = canvas;\n    this.url = null;\n    this.history = null;\n    this.shape = document.createElement('canvas');\n    this.overlap = document.createElement('canvas');\n    this.showPen = showPen;\n    this.showBase = showBase;\n    this.showExtra = showExtra;\n\n    if (width === 0 && height === 0) {\n      const style = canvas.currentStyle || window.getComputedStyle(canvas);\n      this.styleWidth = window.parseInt(style.width);\n      this.styleHeight = window.parseInt(style.height);\n    } else {\n      this.styleWidth = width;\n      this.styleHeight = height;\n    }\n\n    const ctx = canvas.getContext('2d');\n    this.canvas.width = this.styleWidth * window.devicePixelRatio;\n    this.canvas.height = this.styleHeight * window.devicePixelRatio;\n    this.canvas.style.width = this.styleWidth;\n    this.canvas.style.height = this.styleHeight;\n    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n\n    Drawing.setupCanvas(this.canvas, this.styleWidth, this.styleHeight);\n    Drawing.setupCanvas(this.shape, this.styleWidth, this.styleHeight);\n    Drawing.setupCanvas(this.overlap, this.styleWidth, this.styleHeight);\n\n    Object.defineProperties(this, {\n      _mainColor: {\n        value: this.mainColor,\n      },\n      _canvas: {\n        value: this.canvas,\n      },\n    });\n  }\n\n  static setupCanvas(canvas, styleWidth, styleHeight) {\n    /* eslint-disable no-param-reassign */\n    const ctx = canvas.getContext('2d');\n    canvas.width = styleWidth * window.devicePixelRatio;\n    canvas.height = styleHeight * window.devicePixelRatio;\n    canvas.style.width = styleWidth;\n    canvas.style.height = styleHeight;\n    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n  }\n\n  draw(path, color, tool, size) {\n    if (path.length === 0) {\n      return;\n    }\n\n    const ctx = this.canvas.getContext('2d');\n    ctx.lineCap = 'round';\n    switch (tool) {\n      case tools.PEN:\n      case tools.BRUSH:\n        ctx.strokeStyle = color.hex;\n        ctx.globalAlpha = color.a;\n        break;\n      case tools.ERASER:\n        ctx.strokeStyle = '#fff';\n        ctx.globalAlpha = 1.0;\n        break;\n      default:\n        return;\n    }\n    ctx.lineWidth = size;\n    ctx.globalCompositeOperation = 'source-over';\n\n    ctx.beginPath();\n    for (let i = 0; i < Math.max(path.length - 1, 1); i += 1) {\n      const [cx, cy] = path[i];\n      const [nx, ny] = path[i + 1] || path[i];\n      ctx.moveTo(cx, cy);\n      ctx.lineTo(nx, ny);\n    }\n    ctx.stroke();\n    // this.updateCanvas();\n    this.url = null;\n  }\n\n  // TODO: \n  drawObjectComp(obj, editRange) {\n    const ctx = this.shape.getContext('2d');\n    if (editRange) {\n      ctx.drawImage(\n        obj.shape,\n        editRange.lx * window.devicePixelRatio,\n        editRange.ly * window.devicePixelRatio,\n        (editRange.rx - editRange.lx) * window.devicePixelRatio,\n        (editRange.ry - editRange.ly) * window.devicePixelRatio,\n        editRange.lx, editRange.ly,\n        editRange.rx - editRange.lx, editRange.ry - editRange.ly\n      );\n    } else {\n      ctx.drawImage(obj.shape, 0, 0, this.styleWidth, this.styleHeight);\n    }\n    const ctx2 = this.overlap.getContext('2d');\n    if (editRange) {\n      ctx2.drawImage(\n        obj.canvas,\n        editRange.lx * window.devicePixelRatio,\n        editRange.ly * window.devicePixelRatio,\n        (editRange.rx - editRange.lx) * window.devicePixelRatio,\n        (editRange.ry - editRange.ly) * window.devicePixelRatio,\n        editRange.lx, editRange.ly,\n        editRange.rx - editRange.lx, editRange.ry - editRange.ly\n      );\n    } else {\n      ctx2.drawImage(obj.overlap, 0, 0, this.styleWidth, this.styleHeight);\n    }\n    this.updateCanvas();\n    this.url = null;\n  }\n\n  drawObject(obj, editRange) {\n    if (this.tool) {\n      if (this.tool === 'Symbol(PEN)' && !this.showPen) {\n        return;\n      }\n      if (this.tool === 'Symbol(BRUSH)' && !this.showBase) {\n        return;\n      }\n    }\n    const ctx = this.shape.getContext('2d');\n    if (editRange) {\n      ctx.drawImage(\n        obj.canvas,\n        editRange.lx * window.devicePixelRatio,\n        editRange.ly * window.devicePixelRatio,\n        (editRange.rx - editRange.lx) * window.devicePixelRatio,\n        (editRange.ry - editRange.ly) * window.devicePixelRatio,\n        editRange.lx, editRange.ly,\n        editRange.rx - editRange.lx, editRange.ry - editRange.ly\n      );\n    } else {\n      ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n    }\n    this.updateCanvas();\n    this.url = null;\n  }\n\n  drawOverlapObject(obj, editRange) {\n    if (!this.showExtra) {\n      return;\n    }\n    const ctx = this.overlap.getContext('2d');\n    if (editRange) {\n      ctx.drawImage(\n        obj.canvas,\n        editRange.lx * window.devicePixelRatio,\n        editRange.ly * window.devicePixelRatio,\n        (editRange.rx - editRange.lx) * window.devicePixelRatio,\n        (editRange.ry - editRange.ly) * window.devicePixelRatio,\n        editRange.lx, editRange.ly,\n        editRange.rx - editRange.lx, editRange.ry - editRange.ly\n      );\n    } else {\n      ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n    }\n    this.updateCanvas();\n    this.url = null;\n  }\n\n  eraseObject(obj/* , editRange */) {\n    if (this.tool) {\n      if (this.tool === 'Symbol(PEN)' && !this.showPen) {\n        return;\n      }\n      if (this.tool === 'Symbol(BRUSH)' && !this.showBase) {\n        return;\n      }\n    }\n    const ctx = this.shape.getContext('2d');\n    // if (editRange) {\n    //   ctx.drawImage(\n    //     obj.canvas,\n    //     editRange.lx * window.devicePixelRatio,\n    //     editRange.ly * window.devicePixelRatio,\n    //     (editRange.rx - editRange.lx) * window.devicePixelRatio,\n    //     (editRange.ry - editRange.ly) * window.devicePixelRatio,\n    //     editRange.lx, editRange.ly,\n    //     editRange.rx - editRange.lx, editRange.ry - editRange.ly\n    //   );\n    // } else {\n    ctx.globalCompositeOperation = 'destination-out';\n    ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n    ctx.globalCompositeOperation = 'source-over';\n    // }\n    this.updateCanvas();\n    this.url = null;\n  }\n\n  eraseOverlapObject(obj/* , editRange */) {\n    if (!this.showExtra) {\n      return;\n    }\n    const ctx = this.overlap.getContext('2d');\n    // if (editRange) {\n    //   ctx.drawImage(\n    //     obj.canvas,\n    //     editRange.lx * window.devicePixelRatio,\n    //     editRange.ly * window.devicePixelRatio,\n    //     (editRange.rx - editRange.lx) * window.devicePixelRatio,\n    //     (editRange.ry - editRange.ly) * window.devicePixelRatio,\n    //     editRange.lx, editRange.ly,\n    //     editRange.rx - editRange.lx, editRange.ry - editRange.ly\n    //   );\n    // } else {\n    ctx.globalCompositeOperation = 'destination-out';\n    ctx.drawImage(obj.canvas, 0, 0, this.styleWidth, this.styleHeight);\n    ctx.globalCompositeOperation = 'source-over';\n    // }\n    this.canvas.getContext('2d').clearRect(0, 0, this.styleWidth, this.styleHeight);\n    this.updateCanvas();\n    this.url = null;\n  }\n\n  clear(editRange) {\n    const ctx = this.canvas.getContext('2d');\n    if (editRange) {\n      ctx.clearRect(\n        editRange.lx, editRange.ly,\n        editRange.rx - editRange.lx, editRange.ry - editRange.ly\n      );\n    } else {\n      ctx.clearRect(0, 0, this.styleWidth, this.styleHeight);\n    }\n    const ctx2 = this.shape.getContext('2d');\n    if (editRange) {\n      ctx2.clearRect(\n        editRange.lx, editRange.ly,\n        editRange.rx - editRange.lx, editRange.ry - editRange.ly\n      );\n    } else {\n      ctx2.clearRect(0, 0, this.styleWidth, this.styleHeight);\n    }\n    const ctx3 = this.shape.getContext('2d');\n    if (editRange) {\n      ctx3.clearRect(\n        editRange.lx, editRange.ly,\n        editRange.rx - editRange.lx, editRange.ry - editRange.ly\n      );\n    } else {\n      ctx3.clearRect(0, 0, this.styleWidth, this.styleHeight);\n    }\n    this.url = null;\n  }\n\n  colorTune(origShape, origOverlap, info) {\n    Drawing.tune(origShape, this.shape, info);\n    Drawing.tune(origOverlap, this.overlap, info);\n    this.updateCanvas();\n    this.url = null;\n  }\n\n  static tune(orig, canvas, info) {\n    const copied = new Uint8ClampedArray(orig.data);\n    copied.set(orig);\n    const ps = new window.ImageData(\n      copied,\n      canvas.width, canvas.height\n    );\n    const cache = {};\n    for (let i = 0; i < ps.data.length; i += 4) {\n      // Alpha\n      if (ps.data[i + 3] === 0) {\n        /* eslint-disable no-continue */\n        continue;\n      }\n      let newColor;\n      const c = cache[ps.data.slice(i, i + 4).join(',')];\n      if (c) {\n        newColor = c;\n      } else {\n        /* eslint-disable no-mixed-operators */\n        newColor = Color.rgb(ps.data.slice(i, i + 4))\n          .rotate(info.hue)\n          .saturate(info.sat)\n          .lighten(info.val);\n        newColor = newColor.rgb().array();\n        cache[ps.data.slice(i, i + 4).join(',')] = [].concat(newColor);\n      }\n      ps.data[i] = newColor[0];\n      ps.data[i + 1] = newColor[1];\n      ps.data[i + 2] = newColor[2];\n    }\n    canvas.getContext('2d').putImageData(ps, 0, 0);\n  }\n\n  updateCanvas(editRange) {\n    const ctxOrig = this.canvas.getContext('2d');\n    if (!this.tool\n      || (this.tool === 'Symbol(PEN)' && this.showPen)\n      || (this.tool === 'Symbol(BRUSH)' && this.showBase)) {\n      if (editRange) {\n        const w = (editRange.rx - editRange.lx) * window.devicePixelRatio;\n        const h = (editRange.ry - editRange.ly) * window.devicePixelRatio;\n        ctxOrig.putImageData(\n          this.shape.getContext('2d').getImageData(editRange.lx, editRange.ly, w, h), editRange.lx, editRange.ly\n        );\n      } else {\n        ctxOrig.putImageData(\n          this.shape.getContext('2d').getImageData(0, 0, this.shape.width, this.shape.height), 0, 0\n        );\n      }\n      ctxOrig.globalCompositeOperation = 'source-atop';\n    }\n    if (this.tool === 'Symbol(BRUSH)' && this.showExtra) {\n      ctxOrig.drawImage(this.overlap, 0, 0, this.styleWidth, this.styleHeight);\n    }\n    ctxOrig.globalCompositeOperation = 'source-over';\n  }\n\n  changeVisual(pen, base, extra) {\n    this.showPen = pen;\n    this.showBase = base;\n    this.showExtra = extra;\n    this.url = null;\n    this.canvas.getContext('2d').clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.updateCanvas();\n  }\n\n  get imageUrl() {\n    if (!this.url) {\n      this.url = this.canvas.toDataURL();\n    }\n    return this.url;\n  }\n}\n\nexport default Drawing;\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs/Drawing.js","/* eslint-disable no-param-reassign */\n/* eslint-disable no-mixed-operators */\nconst hslToYuv = (h, s, l) => {\n  h /= 360;\n  s /= 100;\n  l /= 100;\n\n  let r;\n  let g;\n  let b;\n\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    const hue2rgb = (p, q, t) => {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\n      if (t < 1 / 2) return q;\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n      return p;\n    };\n\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  r = Math.round(r * 255);\n  g = Math.round(g * 255);\n  b = Math.round(b * 255);\n\n  const y = (0.299 * r + 0.587 * g + 0.114 * b);\n  const u = (-0.169 * r - 0.331 * g + 0.500 * b);\n  const v = (0.500 * r - 0.419 * g - 0.081 * b);\n\n  return [y, u, v];\n};\n\nconst rgbToYuv = (rgb) => {\n  const r = Math.round(rgb[0]);\n  const g = Math.round(rgb[1]);\n  const b = Math.round(rgb[2]);\n\n  const y = (0.299 * r + 0.587 * g + 0.114 * b);\n  const u = (-0.169 * r - 0.331 * g + 0.500 * b);\n  const v = (0.500 * r - 0.419 * g - 0.081 * b);\n\n  return [y, u, v];\n};\n\nexport { hslToYuv, rgbToYuv };\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs/ColorUtil.js","import kmeans from 'ml-kmeans';\nimport dist from 'ml-distance';\n\nimport Drawing from './Drawing';\nimport tools from '../libs/Tools';\nimport { rgbToYuv } from '../libs/ColorUtil';\n\nconst MEASURE_ITER_COUNT = 500;\nconst SORT_DIV = 1;\n\nlet layerIndex = 0;\n\nclass DrawingManager {\n  constructor(canvas) {\n    const style = canvas.currentStyle || window.getComputedStyle(canvas);\n    this.styleWidth = window.parseInt(style.width);\n    this.styleHeight = window.parseInt(style.height);\n    this.fixedObject = new Drawing(null, null, canvas, this.styleWidth, this.styleHeight);\n    this.objects = {};\n    this.objectIndexes = [];\n    this.layers = [];\n    this.histories = [];\n    this.sortCache = {};\n    this.lastKey = null;\n    this.clearedKey = null;\n    this.showPen = true;\n    this.showBase = true;\n    this.showExtra = true;\n\n    Object.defineProperties(this, {\n      _styleWidth: {\n        value: this.styleWidth,\n      },\n      _styleHeight: {\n        value: this.styleHeight,\n      },\n    });\n  }\n\n  static getKey(tool, r, g, b) {\n    layerIndex += 1;\n    const idx = tool === tools.PEN ? 0 : layerIndex;\n    return `${tool.toString()},${r},${g},${b},${idx}`;\n  }\n\n  static getToolString(key) {\n    return key.split(',')[0];\n  }\n\n  static getColorString(key) {\n    return key.split(',').splice(1, 3).join(',');\n  }\n\n  static getColor(colorString) {\n    return colorString.split(',').map(x => parseInt(x, 10));\n  }\n\n  static getImageDataFaster(_x, _y, _w, d) {\n    const x = Math.round(_x);\n    const y = Math.round(_y);\n    const w = Math.round(_w);\n    const r = d[((y * w) + x) * 4];\n    const g = d[(((y * w) + x) * 4) + 1];\n    const b = d[(((y * w) + x) * 4) + 2];\n    const a = d[(((y * w) + x) * 4) + 3];\n    return [r, g, b, a];\n  }\n\n  static measureArea(imgdata, width, height, targetColors, range) {\n    const hits = new Array(targetColors.length);\n    hits.fill(0);\n    let w = width;\n    let h = height;\n    let ox = 0;\n    let oy = 0;\n    if (range) {\n      w = ((range.rx - range.lx) / SORT_DIV) * window.devicePixelRatio;\n      h = ((range.ry - range.ly) / SORT_DIV) * window.devicePixelRatio;\n      ox = (range.lx / SORT_DIV) * window.devicePixelRatio;\n      oy = (range.ly / SORT_DIV) * window.devicePixelRatio;\n    }\n    for (let i = 0; i < MEASURE_ITER_COUNT; i += 1) {\n      const x = Math.round((Math.random() * (w - 1)) + ox);\n      const y = Math.round((Math.random() * (h - 1)) + oy);\n      const p = DrawingManager.getImageDataFaster(x, y, Math.round(width), imgdata);\n      for (let j = 0; j < targetColors.length; j += 1) {\n        const c = targetColors[j];\n        if (p[0] === c[0] && p[1] === c[1] && p[2] === c[2]) {\n          hits[j] += 1;\n        }\n      }\n    }\n    return hits;\n  }\n\n  static filledColor(imgdata, points, width) {\n    for (const point of points) {\n      const p = DrawingManager.getImageDataFaster(point[0], point[1], Math.round(width), imgdata);\n      if (!(p[0] === 0 && p[1] === 0 && p[2] === 0 && p[3] === 0)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  static spoitColor(imgdata, points, width) {\n    for (const point of points) {\n      const p = DrawingManager.getImageDataFaster(point[0], point[1], Math.round(width), imgdata);\n      if (!(p[0] === 0 && p[1] === 0 && p[2] === 0 && p[3] === 0)) {\n        return p;\n      }\n    }\n    return null;\n  }\n\n  static d(arr, before) {\n    let result = [];\n    const kms = [null, null];\n    const bics = [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY];\n    for (let i = 0; i < 2; i += 1) {\n      if (arr.cluster_arr[i].length < 2) {\n        /* eslint-disable no-continue */\n        continue;\n      }\n      const km = kmeans(arr.cluster_arr[i], 2);\n      let newArr = [];\n      newArr = newArr.concat(arr.cluster_arr[i]);\n      newArr = newArr.concat(arr.cluster_arr[1 - i]);\n      for (let j = 0; j < arr.cluster_arr[1 - i].length; j += 1) {\n        km.clusters.push(2);\n      }\n\n      const res = DrawingManager.computeBic(newArr, km);\n      if (res.bic > before) {\n        bics[i] = res.bic;\n        kms[i] = km;\n      }\n    }\n\n    if (bics[0] > before || bics[1] > before) {\n      for (let i = 0; i < 2; i += 1) {\n        if (bics[i] > before) {\n          const km = kms[i];\n          const clusters = new Array(2);\n          for (let k = 0; k < km.clusters.length; k += 1) {\n            if (!clusters[km.clusters[k]]) {\n              clusters[km.clusters[k]] = [];\n            }\n            clusters[km.clusters[k]].push(arr.cluster_arr[i][k]);\n          }\n          km.arr = arr.cluster_arr[i];\n          km.cluster_arr = clusters;\n          result = result.concat(DrawingManager.d(km, bics[i]));\n        } else {\n          result.push(arr.cluster_arr[i]);\n        }\n      }\n    } else {\n      result.push([].concat(arr.cluster_arr[0], arr.cluster_arr[1]));\n    }\n    return result;\n  }\n\n  static divide(arr) {\n    if (arr.length < 2) {\n      return [arr];\n    }\n    const km = kmeans(arr, 2);\n    const clusters = new Array(2);\n    for (let i = 0; i < km.clusters.length; i += 1) {\n      if (!clusters[km.clusters[i]]) {\n        clusters[km.clusters[i]] = [];\n      }\n      clusters[km.clusters[i]].push(arr[i]);\n    }\n    if (!clusters[1]) {\n      return [arr];\n    }\n\n    km.arr = arr;\n    km.cluster_arr = clusters;\n    const res = DrawingManager.computeBic(arr, km);\n    const resClusters = DrawingManager.d(km, res.bic);\n    return resClusters;\n  }\n\n  static computeBic(arr, km) {\n    const centers = km.centroids.map(x => x.centroid);\n    const labels = km.clusters;\n    const m = km.centroids.length;\n    const n = km.centroids.map(x => x.size);\n    const N = arr.length;\n    const d = arr[0].length;\n\n    const clusters = new Array(m);\n    for (let i = 0; i < km.clusters.length; i += 1) {\n      if (!clusters[km.clusters[i]]) {\n        clusters[km.clusters[i]] = [];\n      }\n      clusters[km.clusters[i]].push(arr[i]);\n    }\n\n    let s = 0;\n    for (let i = 0; i < m; i += 1) {\n      for (let j = 0; j < N; j += 1) {\n        if (i === labels[j]) {\n          s += dist.distance.euclidean(arr[j], centers[i]);\n        }\n      }\n    }\n    const clVar = (1.0 / (N - m) / d) * s;\n    const constTerm = 0.5 * m * Math.log(N) * (d + 1);\n    if (!clVar) {\n      return { clusters, centers, bic: Number.NEGATIVE_INFINITY };\n    }\n    let bic = 0;\n    for (let i = 0; i < m; i += 1) {\n      const b = n[i];\n      /* eslint-disable max-len */\n      /* eslint-disable  no-mixed-operators */\n      bic += b * Math.log(b) - b * Math.log(N) - ((b * d) / 2) * Math.log(2 * Math.PI * clVar) - ((b - 1) * d / 2);\n    }\n    bic -= constTerm;\n    return { clusters, centers, bic };\n  }\n\n  draw(obj, color, tool, editRange) {\n    switch (tool) {\n      case tools.PEN:\n        this.drawPen(obj, color, tool, editRange);\n        break;\n      case tools.BRUSH:\n        this.drawBrush(obj, color, tool, editRange);\n        break;\n      default:\n        break;\n    }\n\n    this.updateSort();\n    // TODO: editRange \n    // this.update(editRange);\n    this.update();\n  }\n\n  drawPen(obj, color, tool) {\n    if (!this.showPen) {\n      return;\n    }\n    const key = DrawingManager.getKey(tool, color.rgba.r, color.rgba.g, color.rgba.b);\n    let target;\n    if (this.objectIndexes.indexOf(key) === -1) {\n      const canvas = document.createElement('canvas');\n      target = new Drawing(color, tool.toString(), canvas, this.styleWidth, this.styleHeight, this.showPen, this.showBase, this.showExtra);\n      this.objectIndexes.push(key);\n      if (this.clearedKey && DrawingManager.getToolString(this.clearedKey) === 'Symbol(PEN)' && this.objects[this.clearedKey]) {\n        target.history = Object.assign({}, this.objects[this.clearedKey]);\n      }\n      this.clearedKey = null;\n    } else {\n      target = this.objects[key];\n    }\n    target.drawObject(obj);\n    this.objects[key] = target;\n    this.lastKey = key;\n  }\n\n  drawBrush(obj, color, tool, editRange) {\n    if (!this.showBase) {\n      return;\n    }\n    const key = DrawingManager.getKey(tool, color.rgba.r, color.rgba.g, color.rgba.b);\n    const currentColorString = DrawingManager.getColorString(key);\n\n    const allColors = this.objectIndexes.filter(x => DrawingManager.getToolString(x) === 'Symbol(BRUSH)').map(x => DrawingManager.getColor(DrawingManager.getColorString(x)));\n    allColors.push(DrawingManager.getColor(currentColorString));\n\n    const overlapping = this.checkOverlap(obj, editRange);\n    let colors = [];\n    colors = colors.concat(overlapping.comp.map(x => DrawingManager.getColorString(x)));\n    colors = colors.concat(overlapping.spilled.map(x => DrawingManager.getColorString(x)));\n    colors = colors.filter((x, i, self) => self.indexOf(x) === i);\n\n    // if (overlapping.comp.length > 0) {\n    //\n    // } else {\n    //\n    // }\n    const sameIndexes = [];\n    let last = -1;\n    /* eslint-disable no-constant-condition */\n    while (true) {\n      const idx = colors.indexOf(currentColorString, last + 1);\n      if (idx === -1) {\n        break;\n      }\n      sameIndexes.push(idx);\n      last = idx;\n    }\n\n    const simIndexes = [];\n\n    const currentColor = DrawingManager.getColor(currentColorString);\n    const b = rgbToYuv(currentColor);\n    for (let i = 0; i < colors.length; i += 1) {\n      const a = rgbToYuv(DrawingManager.getColor(colors[i]));\n      console.log('----');\n      console.log(Math.abs(a[0] - b[0]));\n      // console.log(Math.abs(a[1] - b[1]));\n      // console.log(Math.abs(a[2] - b[2]));\n      console.log(dist.distance.euclidean([a[1], a[2]], [b[1], b[2]]));\n      console.log(dist.distance.euclidean(DrawingManager.getColor(colors[i]), currentColor));\n      // const d = dist.distance.euclidean(DrawingManager.getColor(colors[i]), currentColor);\n      // TODO: \n      if (Math.abs(a[0] - b[0]) > 100 || dist.distance.euclidean([a[1], a[2]], [b[1], b[2]]) > 40) {\n        continue;\n      }\n      simIndexes.push(i);\n    }\n\n    let target;\n    /* if (sameIndexes.length > 0 && overlapping.comp.length === sameIndexes.length) {\n      console.log('');\n      return;\n    } else */if ((overlapping.spilled.length > 0 || overlapping.comp.length > 0) && simIndexes.length > 0 && simIndexes.length !== sameIndexes.length) {\n      //   \n      if (overlapping.comp.length > 0) {\n        let targetIdx = 0;\n        let minTarget = 10000;\n        for (let i = 0; i < overlapping.comp.length; i += 1) {\n          const d = dist.distance.euclidean(DrawingManager.getColor(DrawingManager.getColorString(overlapping.comp[i])), currentColor);\n          if (d < minTarget) {\n            targetIdx = i;\n            minTarget = d;\n          }\n        }\n        target = this.objects[overlapping.comp[targetIdx]];\n        let changed = false;\n        for (let i = 0; i < overlapping.spilled.length; i += 1) {\n          const d = dist.distance.euclidean(DrawingManager.getColor(DrawingManager.getColorString(overlapping.spilled[i])), currentColor);\n          if (d < minTarget) {\n            targetIdx = i;\n            minTarget = d;\n            changed = true;\n          }\n        }\n        if (changed) {\n          target = this.objects[overlapping.spilled[targetIdx]];\n        }\n        // for (let i = 1; i < simIndexes.length; i += 1) {\n        //   const sim = overlapping.comp[simIndexes[i]];\n        //   target.drawObject(this.objects[sim]);\n        //   delete this.objects[sim];\n        //   this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n        // }\n        // \n        target.drawOverlapObject(obj);\n        this.lastKey = overlapping.comp[simIndexes[0]];\n      } else {\n        let targetIdx = 0;\n        let minTarget = 10000;\n        for (let i = 0; i < overlapping.spilled.length; i += 1) {\n          const d = dist.distance.euclidean(DrawingManager.getColor(DrawingManager.getColorString(overlapping.spilled[i])), currentColor);\n          console.log(d);\n          if (d < minTarget) {\n            console.log('min!!!');\n            targetIdx = i;\n            minTarget = d;\n          }\n        }\n        target = this.objects[overlapping.spilled[targetIdx]];\n        // for (let i = 1; i < simIndexes.length; i += 1) {\n        //   const sim = overlapping.spilled[simIndexes[i]];\n        //   target.drawObject(this.objects[sim]);\n        //   delete this.objects[sim];\n        //   this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n        // }\n        // \n        target.drawOverlapObject(obj);\n        this.lastKey = overlapping.spilled[simIndexes[0]];\n      }\n    } else if ((overlapping.comp.length > 0 || overlapping.spilled.length > 0) && sameIndexes.length > 0) {\n      //   \n      if (overlapping.comp.length > 0) {\n        // target = this.objects[overlapping.comp[sameIndexes[0]]];\n        // for (let i = 1; i < sameIndexes.length; i += 1) {\n        //   const sim = overlapping.comp[sameIndexes[i]];\n        //   target.drawObjectComp(this.objects[sim]);\n        //   delete this.objects[sim];\n        //   this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n        // }\n        for (let i = 0; i < overlapping.comp.length; i += 1) {\n          const sim = overlapping.comp[i];\n          if (DrawingManager.getColorString(sim) !== currentColorString) {\n            continue;\n          }\n          if (!target) {\n            target = this.objects[overlapping.comp[i]];\n            continue;\n          }\n          target.drawObjectComp(this.objects[sim]);\n          delete this.objects[sim];\n          this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n        }\n        // TODO: \n        if (!target) {\n          for (let i = 0; i < overlapping.spilled.length; i += 1) {\n            const sim = overlapping.spilled[i];\n            if (DrawingManager.getColorString(sim) !== currentColorString) {\n              continue;\n            }\n            if (!target) {\n              target = this.objects[overlapping.spilled[i]];\n              continue;\n            }\n            target.drawObjectComp(this.objects[sim]);\n            delete this.objects[sim];\n            this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n          }\n        }\n        target.drawObject(obj);\n        this.lastKey = overlapping.comp[sameIndexes[0]];\n      } else {\n        for (let i = 0; i < overlapping.spilled.length; i += 1) {\n          const sim = overlapping.spilled[i];\n          if (DrawingManager.getColorString(sim) !== currentColorString) {\n            continue;\n          }\n          if (!target) {\n            target = this.objects[overlapping.spilled[i]];\n            continue;\n          }\n          target.drawObjectComp(this.objects[sim]);\n          delete this.objects[sim];\n          this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n        }\n        // for (let i = 1; i < sameIndexes.length; i += 1) {\n        //   const sim = overlapping.spilled[sameIndexes[i]];\n        //   target.drawObjectComp(this.objects[sim]);\n        //   delete this.objects[sim];\n        //   this.objectIndexes.splice(this.objectIndexes.indexOf(sim), 1);\n        // }\n        target.drawObject(obj);\n        this.lastKey = overlapping.spilled[sameIndexes[0]];\n      }\n    } else {\n      const canvas = document.createElement('canvas');\n      target = new Drawing(color, tool.toString(), canvas, this.styleWidth, this.styleHeight, this.showPen, this.showBase, this.showExtra);\n      target.drawObject(obj);\n      this.objectIndexes.push(key);\n      this.objects[key] = target;\n      this.lastKey = key;\n      if (this.clearedKey && DrawingManager.getToolString(this.clearedKey) === 'Symbol(BRUSH)' && this.objects[this.clearedKey]) {\n        target.history = Object.assign({}, this.objects[this.clearedKey]);\n      }\n      this.clearedKey = null;\n    }\n  }\n\n  erase(obj, color, tool, editRange, key) {\n    if (!key) {\n      return;\n    }\n    if (key.indexOf('_overlap') === -1) {\n      const target = this.objects[key];\n      target.eraseObject(obj);\n      this.lastKey = key;\n    } else {\n      const k = key.split('_overlap')[0];\n      const target = this.objects[k];\n      target.eraseOverlapObject(obj);\n      this.lastKey = k;\n    }\n\n    this.update();\n    this.updateSort();\n  }\n\n  update(editRange) {\n    this.layers = [];\n    this.fixedObject.clear(editRange);\n    for (const key of this.objectIndexes) {\n      const tool = DrawingManager.getToolString(key);\n      let target = this.objects[key];\n      const histories = [];\n      while (target.history) {\n        histories.push(target.history.url);\n        target = target.history;\n      }\n      this.layers.push({\n        url: this.objects[key].imageUrl,\n        histories,\n      });\n      if ((tool === 'Symbol(PEN)' && this.showPen)\n        || (tool === 'Symbol(BRUSH)' && (this.showBase || this.showExtra))) {\n        this.fixedObject.drawObject(this.objects[key], editRange);\n      }\n    }\n    this.layers = this.layers.reverse();\n  }\n\n  updateSort() {\n    const c1 = document.createElement('canvas');\n    c1.style.width = this.styleWidth;\n    c1.style.height = this.styleHeight;\n    const d1 = new Drawing(null, null, c1, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n    const ctx1 = d1.canvas.getContext('2d');\n\n    const c2 = document.createElement('canvas');\n    c2.style.width = this.styleWidth;\n    c2.style.height = this.styleHeight;\n    const d2 = new Drawing(null, null, c2, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n    const ctx2 = d2.canvas.getContext('2d');\n\n    this.objectIndexes.sort((key1, key2) => {\n      const o1 = this.objects[key1];\n      const o2 = this.objects[key2];\n      const tool1 = key1.split(',')[0];\n      const tool2 = key2.split(',')[0];\n      if (tool1 !== tool2) {\n        return tool1 === 'Symbol(PEN)' ? 1 : -1;\n      }\n\n      const cacheKey = `${key1}-${key2}`;\n      let cache = this.sortCache[cacheKey];\n      if (cache && key1 !== this.lastKey && key2 !== this.lastKey) {\n        return cache;\n      }\n\n      const oc1 = o1.canvas;\n      const oc2 = o2.canvas;\n\n      ctx1.globalCompositeOperation = 'source-over';\n      ctx1.drawImage(oc1, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n      ctx1.globalCompositeOperation = 'source-in';\n      ctx1.fillStyle = '#f00';\n      ctx1.fillRect(0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\n      ctx2.globalCompositeOperation = 'source-over';\n      ctx2.drawImage(oc2, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n      ctx2.globalCompositeOperation = 'source-in';\n      ctx2.fillStyle = '#00f';\n      ctx2.fillRect(0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\n      ctx2.globalCompositeOperation = 'xor';\n      ctx2.drawImage(c1, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\n      const imgdata = ctx2.getImageData(0, 0, d2.canvas.width, d2.canvas.height).data;\n\n      const [a, b] = DrawingManager.measureArea(\n        imgdata,\n        d2.canvas.width,\n        d2.canvas.height,\n        [[255, 0, 0], [0, 0, 255]]\n      );\n\n      d1.clear();\n      d2.clear();\n\n      cache = a > b ? -1 : 1;\n      this.sortCache[cacheKey] = cache;\n      return cache;\n    });\n  }\n\n  checkOverlap(obj, editRange) {\n    const result = {\n      comp: [],\n      spilled: [],\n    };\n\n    if (!this.showBase) {\n      return result;\n    }\n\n    const c1 = document.createElement('canvas');\n    c1.style.width = this.styleWidth;\n    c1.style.height = this.styleHeight;\n    const d1 = new Drawing(null, null, c1, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV, false, true, false);\n    const ctx1 = d1.canvas.getContext('2d');\n\n    ctx1.globalCompositeOperation = 'source-over';\n    ctx1.drawImage(obj.canvas, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n    ctx1.globalCompositeOperation = 'source-in';\n    ctx1.fillStyle = '#f00';\n    ctx1.fillRect(0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\n    const c2 = document.createElement('canvas');\n    c2.style.width = this.styleWidth;\n    c2.style.height = this.styleHeight;\n    const d2 = new Drawing(null, null, c2, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV, false, true, false);\n    const ctx2 = d2.canvas.getContext('2d');\n\n    for (let i = 0; i < this.objectIndexes.length; i += 1) {\n      const key = this.objectIndexes[i];\n      if (DrawingManager.getToolString(key) === 'Symbol(PEN)') {\n        continue;\n      }\n      const target = this.objects[this.objectIndexes[i]];\n\n      ctx2.globalCompositeOperation = 'source-over';\n      ctx2.drawImage(target.canvas, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n      ctx2.globalCompositeOperation = 'source-in';\n      ctx2.fillStyle = '#00f';\n      ctx2.fillRect(0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\n      ctx2.globalCompositeOperation = 'difference';\n      ctx2.drawImage(c1, 0, 0, this.styleWidth / SORT_DIV, this.styleHeight / SORT_DIV);\n\n      const imgdata = ctx2.getImageData(0, 0, d2.canvas.width, d2.canvas.height).data;\n\n      const [a, b, c] = DrawingManager.measureArea(\n        imgdata,\n        d2.canvas.width,\n        d2.canvas.height,\n        [[255, 0, 0], [255, 0, 255], [0, 0, 255]],\n        editRange\n      );\n\n      d2.clear();\n\n      if (a !== 0 && b !== 0 && c !== 0) {\n        result.spilled.push(key);\n      } else if ((a === 0 || c === 0) && b !== 0) {\n        result.comp.push(key);\n      }\n    }\n    return result;\n  }\n\n  spoit(point) {\n    const imgdata = this.fixedObject.canvas.getContext('2d').getImageData(0, 0, this.fixedObject.canvas.width, this.fixedObject.canvas.height).data;\n    return DrawingManager.spoitColor(imgdata, point, this.fixedObject.canvas.width);\n  }\n\n  getTopKey(points) {\n    for (let i = this.objectIndexes.length - 1; i >= 0; i -= 1) {\n      const key = this.objectIndexes[i];\n      const target = this.objects[key];\n      const overlap = target.overlap.getContext('2d').getImageData(0, 0, target.overlap.width, target.overlap.height).data;\n      if (this.showExtra && DrawingManager.filledColor(overlap, points, target.overlap.width)) {\n        return `${key}_overlap`;\n      }\n      const shape = target.shape.getContext('2d').getImageData(0, 0, target.shape.width, target.shape.height).data;\n      const v = !target.tool || (target.tool === 'Symbol(PEN)' && target.showPen) || (target.tool === 'Symbol(BRUSH)' && target.showBase);\n      if (v && DrawingManager.filledColor(shape, points, target.shape.width)) {\n        return key;\n      }\n    }\n    return undefined;\n  }\n\n  // clear(index) {\n  // }\n\n  clearAll() {\n    this.objects = [];\n    this.histories = [];\n    this.layers = [];\n  }\n\n  undo() {\n    this.objects = this.histories[this.histories.length - 1];\n  }\n\n  rollback(layerIdx, historyIdx) {\n    const length = this.objectIndexes.length;\n    const key = this.objectIndexes[length - layerIdx - 1];\n    const canvas = document.createElement('canvas');\n    const target = new Drawing(null, DrawingManager.getToolString(key), canvas, this.styleWidth, this.styleHeight);\n    let history = this.objects[key].history;\n    for (let i = 0; i < historyIdx; i += 1) {\n      history = history.history;\n    }\n    target.drawObjectComp(history);\n    target.history = Object.assign({}, this.objects[key]);\n    this.objects[key] = target;\n    this.update();\n  }\n\n  changeVisual(pen, base, extra) {\n    this.showPen = pen;\n    this.showBase = base;\n    this.showExtra = extra;\n    for (let i = 0; i < this.objectIndexes.length; i += 1) {\n      this.objects[this.objectIndexes[i]].changeVisual(pen, base, extra);\n    }\n    this.update();\n  }\n}\n\nexport default DrawingManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs/DrawingManager.js","<template>\n  <div id=\"app\">\n    <ui-canvas\n      :current-color='currentColor'\n      :current-tool='currentTool'\n      :prev-tool='prevTool'\n      :tool-sizes='toolSizes'\n      :drawing-manager='drawingManager'\n      @ontune='ontune'\n      @onextractcolor='onextractcolor'\n    ></ui-canvas>\n    <div class='palette' v-show='showPalette'>\n      <sketch id='color-picker' v-model='currentColor' @change-color='onchange' ref='colorPicker'></sketch>\n      <ui-slider :defaultValue='defaultSize' @change-value='onchangesize' ref='slider'></ui-slider>\n    </div>\n    <div id='layer-box'>\n      <ui-layer-list v-if='drawingManager' class='layer-list'\n        :layers='drawingManager.layers' @onclear='onclear' @rollback='rollback'>\n      </ui-layer-list>\n      <div id='show-layer-box'>\n        <md-switch v-model='showPen' @change='onchangevisiual'></md-switch>\n        <md-switch v-model='showBase' @change='onchangevisiual'></md-switch>\n        <md-switch v-model='showExtra' @change='onchangevisiual'></md-switch>\n      </div>\n    </div>\n    <div id='canvas-box'>\n      <md-button class='md-fab' @click='newcanvas'>\n        <md-icon>note_add</md-icon>\n      </md-button>\n      <md-button class='md-fab md-mini' @click='togglepalette'>\n        <md-icon>palette</md-icon>\n      </md-button>\n      <!-- <md-button class='md-fab md-mini'>\n        <md-icon>undo</md-icon>\n      </md-button> -->\n    </div>\n    <div id='tool-box'>\n      <md-button-toggle md-single class=\"md-accent\" ref='toolButtons'>\n        <md-button class=\"md-icon-button md-toggle\" @click='toggletool(\"pen\")' ref='penButton'>\n          <md-icon>edit</md-icon>\n        </md-button>\n\n        <md-button class=\"md-icon-button\"  @click='toggletool(\"brush\")' ref='brushButton'>\n          <md-icon>brush</md-icon>\n        </md-button>\n\n        <md-button class=\"md-icon-button\"  @click='toggletool(\"eraser\")'>\n          <md-icon>call_to_action</md-icon>\n        </md-button>\n\n        <md-button class=\"md-icon-button\"  @click='toggletool(\"spoit\")'>\n          <md-icon>colorize</md-icon>\n        </md-button>\n\n        <md-button class=\"md-icon-button\"  @click='toggletool(\"color\")'>\n          <md-icon>tune</md-icon>\n        </md-button>\n      </md-button-toggle>\n    </div>\n    <md-dialog id='color-dialog' ref=\"colorDialog\">\n      <md-dialog-title></md-dialog-title>\n\n      <md-dialog-content>\n        \n        <ui-slider :defaultValue='50' @change-value='onchangehue' ref='hueSlider'></ui-slider>\n        \n        <ui-slider :defaultValue='50' @change-value='onchangesat' ref='satSlider'></ui-slider>\n        \n        <ui-slider :defaultValue='50' @change-value='onchangeval' ref='valSlider'></ui-slider>\n      </md-dialog-content>\n\n      <md-dialog-actions>\n        <md-button class=\"md-primary\" @click=\"closeColorDialog\"></md-button>\n        <md-button class=\"md-primary\" @click=\"applyColorDialog\"></md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  </div>\n</template>\n\n<script>\nimport { Sketch } from 'vue-color';\nimport Vue from 'vue';\nimport Color from 'color';\nimport VueMaterial from 'vue-material';\nimport 'vue-material/dist/vue-material.css';\nimport UiCanvas from './components/UiCanvas';\nimport UiSlider from './components/UiSlider';\nimport UiLayerList from './components/UiLayerList';\nimport DrawingManager from './libs/DrawingManager';\nimport tools from './libs/Tools';\n\nVue.use(VueMaterial);\n\nconst currentColor = {\n  hex: '#4A4A4A',\n  rgba: {\n    r: 74,\n    g: 74,\n    b: 74,\n    a: 1,\n  },\n  a: 1,\n};\n\nconst currentTool = tools.PEN;\nconst prevTool = currentTool;\nconst toolSizes = {};\ntoolSizes[tools.PEN] = 4;\ntoolSizes[tools.BRUSH] = 30;\ntoolSizes[tools.ERASER] = 30;\n\nexport default {\n  name: 'app',\n  components: {\n    Sketch,\n    UiCanvas,\n    UiLayerList,\n    UiSlider,\n  },\n  data() {\n    return {\n      currentColor,\n      currentTool,\n      prevTool,\n      toolSizes,\n      drawingManager: undefined,\n      defaultSize: 4,\n      tuneTargetKey: undefined,\n      tuneTarget: undefined,\n      tuneInfo: undefined,\n      tuneShape: undefined,\n      tuneOverlap: undefined,\n      showPen: true,\n      showBase: true,\n      showExtra: true,\n      showPalette: true,\n    };\n  },\n  mounted() {\n    window.devicePixelRatio = 1.0;\n    this.drawingManager = new DrawingManager(document.querySelector('#fixed-canvas'));\n\n    let count = 0;\n    let startTime = 0;\n    const counter = () => {\n      count += 1;\n      if (new Date().getTime() - startTime > 1000) {\n        document.title = `(FPS: ${count})`;\n        count = 0;\n        startTime = new window.Date().getTime();\n      }\n      window.requestAnimationFrame(counter);\n    };\n    window.requestAnimationFrame(counter);\n  },\n  methods: {\n    onchange(color) {\n      this.currentColor = color;\n    },\n    toggletool(tool) {\n      this.prevTool = this.currentTool;\n      this.currentTool = tools.fromName(tool);\n      this.$refs.slider.setValue(this.toolSizes[this.currentTool], true, false);\n    },\n    onchangesize(size) {\n      this.toolSizes[this.currentTool] = size;\n    },\n    onextractcolor(color) {\n      this.$refs.colorPicker.colorChange({\n        hex: Color.rgb(color).hex(),\n        rgba: {\n          r: color[0],\n          g: color[1],\n          b: color[2],\n          a: 1,\n        },\n        a: 1,\n      });\n    },\n    newcanvas() {\n      this.drawingManager = new DrawingManager(document.querySelector('#fixed-canvas'));\n      this.currentColor = currentColor;\n      this.currentTool = currentTool;\n      this.$refs.slider.setValue(this.defaultSize, true, false);\n      Array.from(this.$refs.toolButtons.$el.children).map(x => x.classList.remove('md-toggle'));\n      // this.$refs.brushButton.$el.classList.add('md-toggle');\n      this.$refs.penButton.$el.classList.add('md-toggle');\n      this.showPen = true;\n      this.showBase = true;\n      this.showExtra = true;\n      this.showPalette = true;\n    },\n    onclear(index) {\n      if (this.drawingManager) {\n        const length = this.drawingManager.objectIndexes.length;\n        const clearedKey = this.drawingManager.objectIndexes.splice(length - index - 1, 1)[0];\n        this.drawingManager.clearedKey = clearedKey;\n        this.drawingManager.update();\n      }\n    },\n    rollback(layerIdx, historyIdx) {\n      this.drawingManager.rollback(layerIdx, historyIdx);\n    },\n    openColorDialog() {\n      this.$refs.hueSlider.setValue(50, true, false);\n      this.$refs.satSlider.setValue(50, true, false);\n      this.$refs.valSlider.setValue(50, true, false);\n      this.$refs.colorDialog.open();\n    },\n    closeColorDialog() {\n      const shape = new Uint8ClampedArray(this.tuneShape.data);\n      shape.set(this.tuneShape);\n      const ps = new window.ImageData(\n        shape,\n        this.tuneTarget.shape.width, this.tuneTarget.shape.height\n      );\n      this.tuneTarget.shape.getContext('2d').putImageData(ps, 0, 0);\n      const overlap = new Uint8ClampedArray(this.tuneOverlap.data);\n      overlap.set(this.tuneOverlap);\n      const po = new window.ImageData(\n        overlap,\n        this.tuneTarget.overlap.width, this.tuneTarget.overlap.height\n      );\n      this.tuneTarget.overlap.getContext('2d').putImageData(po, 0, 0);\n      this.tuneTarget.url = null;\n      this.tuneTarget.updateCanvas();\n      this.drawingManager.update();\n      this.$refs.colorDialog.close();\n    },\n    applyColorDialog() {\n      const targetTool = DrawingManager.getToolString(this.tuneTargetKey);\n      const targetColor =\n        DrawingManager.getColor(DrawingManager.getColorString(this.tuneTargetKey));\n      let newColor = Color.rgb(targetColor)\n        .rotate(this.tuneInfo.hue)\n        .saturate(this.tuneInfo.sat)\n        .lighten(this.tuneInfo.val)\n        .rgb()\n        .array();\n      newColor = newColor.map(x => Math.floor(x));\n      const newKey = DrawingManager.getKey(\n        targetTool,\n        Math.floor(newColor[0]),\n        Math.floor(newColor[1]),\n        Math.floor(newColor[2])\n      );\n      const idx = this.drawingManager.objectIndexes.indexOf(this.tuneTargetKey);\n      if (idx === -1) {\n        return;\n      }\n      this.drawingManager.objectIndexes[idx] = newKey;\n      this.drawingManager.objects[newKey] = this.tuneTarget;\n      delete this.drawingManager.objects[this.tuneTargetKey];\n      this.drawingManager.update();\n      this.$refs.colorDialog.close();\n    },\n    ontune(targetKey) {\n      this.tuneTargetKey = targetKey;\n      this.tuneTarget = this.drawingManager.objects[targetKey];\n      this.tuneInfo = {\n        hue: 0.0,\n        sat: 0.0,\n        val: 0.0,\n      };\n      this.tuneShape = this.tuneTarget.shape.getContext('2d').getImageData(0, 0, this.tuneTarget.shape.width, this.tuneTarget.shape.height);\n      this.tuneOverlap = this.tuneTarget.overlap.getContext('2d').getImageData(0, 0, this.tuneTarget.overlap.width, this.tuneTarget.overlap.height);\n      this.openColorDialog();\n    },\n    onchangehue(hue) {\n      /* eslint-disable no-mixed-operators */\n      this.tuneInfo.hue = (hue - 50) / 100 * 360;\n      this.colorTune();\n    },\n    onchangesat(sat) {\n      this.tuneInfo.sat = (sat - 50) / 100;\n      this.colorTune();\n    },\n    onchangeval(val) {\n      this.tuneInfo.val = (val - 50) / 100;\n      this.colorTune();\n    },\n    colorTune() {\n      this.tuneTarget.colorTune(this.tuneShape, this.tuneOverlap, this.tuneInfo);\n      this.drawingManager.update();\n    },\n    onchangevisiual() {\n      this.drawingManager.changeVisual(this.showPen, this.showBase, this.showExtra);\n    },\n    togglepalette() {\n      this.showPalette = !this.showPalette;\n    },\n  },\n};\n</script>\n\n<style>\nbody\n{\n  display: flex;\n\n  margin: 0;\n  user-select: none;\n}\n\n#app\n{\n  width: 100%;\n  height: 100vh;\n}\n\n.palette\n{\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  width: fit-content;\n\n  border-radius: 4px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);\n}\n\n.palette>.ui-slider\n{\n  margin-left: 10px;\n  margin-right: 10px;\n  width: auto;\n}\n\n#color-picker\n{\n  box-shadow: none;\n}\n\n#layer-box\n{\n  position: absolute;\n  right: 0px;\n  top: 0px;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 220px;\n  height: 100%;\n\n  background: #eee;\n  box-shadow: 0 0 4px rgba(0,0,0,.15) inset;\n}\n\n.layer-list\n{\n  width: 220px;\n  height: auto;\n\n  overflow-y: scroll;\n  overflow-x: hidden;\n\n  flex: 1 1 auto;\n}\n\n#show-layer-box\n{\n  margin: 8px;\n\n  height: fit-content;\n\n  flex-basis: fit-content;\n}\n\n#canvas-box\n{\n  position: absolute;\n  bottom: 10px;\n  left: 20px;\n\n  width: fit-content;\n  padding: 4px;\n\n  display: flex;\n  align-items: flex-end;\n}\n\n#tool-box\n{\n  position: absolute;\n  right: 0;\n  bottom: 10px;\n  left: 0;\n\n  width: fit-content;\n  margin: 0 auto;\n  /*padding: 4px;*/\n\n  border-radius: 4px;\n  background: rgba(255, 255, 255, .8);\n  box-shadow: 0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);\n}\n\n#color-dialog>.md-dialog\n{\n  position: absolute;\n  right: 20px;\n  min-width: 220px;\n  width: 220px;\n}\n\n.md-backdrop.md-dialog-backdrop.md-active\n{\n  background: none;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?356050f4","<template>\n  <div id='ui-canvas'>\n    <canvas id='fixed-canvas'></canvas>\n    <canvas id='drawing'\n      @mousedown='mousedown'\n      @touchstart='mousedown'\n      @mousemove='mousemove'\n      @touchmove='mousemove'\n      @mouseup='mouseup'\n      @touchend='mouseup'\n      @mouseleave='mouseup'\n      ref='drawing'\n    ></canvas>\n  </div>\n</template>\n\n<script>\n\nimport Drawing from '../libs/Drawing';\nimport tools from '../libs/Tools';\n\nconst getMousePos = (event) => {\n  const rect = event.target.getBoundingClientRect();\n  const clientX = event.clientX || event.touches[0].clientX;\n  const clientY = event.clientY || event.touches[0].clientY;\n  return [clientX - rect.left, clientY - rect.top];\n};\n\nexport default {\n  name: 'UiCanvas',\n  props: [\n    'current-color',\n    'current-tool',\n    'prev-tool',\n    'tool-sizes',\n    'drawing-manager',\n  ],\n  data() {\n    return {\n      currentStroke: [],\n      drawing: null,\n      editRange: { lx: 0, ly: 0, rx: 0, ry: 0 },\n      eraseTarget: undefined,\n    };\n  },\n  mounted() {\n    this.$refs.drawing.addEventListener('dragover', this.dragover, false);\n    this.$refs.drawing.addEventListener('drop', this.drop, false);\n  },\n  methods: {\n    mousedown(event) {\n      event.preventDefault();\n      const [mousex, mousey] = getMousePos(event);\n      let firstTarget;\n      let color;\n      switch (this.currentTool) {\n        case tools.PEN:\n        case tools.BRUSH:\n        case tools.ERASER:\n          this.drawing = new Drawing(this.currentColor, null, document.querySelector('#drawing'));\n          break;\n        case tools.SPOIT:\n          color = this.drawingManager.spoit([[\n            mousex * window.devicePixelRatio,\n            mousey * window.devicePixelRatio,\n          ]]);\n          if (color) {\n            this.$emit('onextractcolor', color);\n          }\n          return;\n        case tools.FILL:\n          return;\n        case tools.COLOR:\n          firstTarget = this.drawingManager.getTopKey([[\n            mousex * window.devicePixelRatio,\n            mousey * window.devicePixelRatio,\n          ]]);\n          if (firstTarget) {\n            this.$emit('ontune', firstTarget.split('_overlap')[0]);\n          }\n          return;\n        default:\n          return;\n      }\n      const size = this.toolSizes[this.currentTool];\n      this.currentStroke.push([mousex, mousey]);\n      this.drawing.draw(\n        this.currentStroke,\n        this.currentColor,\n        this.currentTool,\n        size\n      );\n      //  size / 2 \n      this.editRange.lx = mousex - size;\n      this.editRange.ly = mousey - size;\n      this.editRange.rx = mousex + size;\n      this.editRange.ry = mousey + size;\n\n      this.updateerasertarget(mousex * window.devicePixelRatio, mousey * window.devicePixelRatio);\n    },\n    mousemove(event) {\n      event.preventDefault();\n      if (!this.drawing) {\n        return;\n      }\n      const [pmousex, pmousey] = this.currentStroke[this.currentStroke.length - 1];\n      const [mousex, mousey] = getMousePos(event);\n      if (mousex === pmousex && mousey === pmousey) {\n        return;\n      }\n      const size = this.toolSizes[this.currentTool];\n      this.currentStroke.push([mousex, mousey]);\n      this.drawing.clear(this.editRange);\n      this.drawing.draw(\n        this.currentStroke,\n        this.currentColor,\n        this.currentTool,\n        size\n      );\n      //  size / 2 \n      this.editRange.lx = Math.min(mousex - size, this.editRange.lx);\n      this.editRange.ly = Math.min(mousey - size, this.editRange.ly);\n      this.editRange.rx = Math.max(mousex + size, this.editRange.rx);\n      this.editRange.ry = Math.max(mousey + size, this.editRange.ry);\n\n      this.updateerasertarget(mousex * window.devicePixelRatio, mousey * window.devicePixelRatio);\n    },\n    mouseup(event) {\n      event.preventDefault();\n      if (!this.drawing) {\n        return;\n      }\n      switch (this.currentTool) {\n        case tools.PEN:\n        case tools.BRUSH:\n          this.drawingManager.draw(\n            this.drawing,\n            this.currentColor,\n            this.currentTool,\n            this.editRange,\n          );\n          break;\n        case tools.ERASER:\n          this.drawingManager.erase(\n            this.drawing,\n            this.currentColor,\n            this.currentTool,\n            this.editRange,\n            this.eraseTarget,\n          );\n          break;\n        case tools.SPOIT:\n          return;\n        case tools.FILL:\n          return;\n        default:\n          return;\n      }\n      this.drawing.clear(this.editRange);\n      this.drawing = null;\n      this.currentStroke = [];\n      this.editRange = { lx: 0, ly: 0, rx: 0, ry: 0 };\n      this.eraseTarget = undefined;\n      this.$parent.$emit('update-layer-list');\n    },\n    updateerasertarget(mousex, mousey) {\n      const size = this.toolSizes[this.currentTool];\n      if (this.currentTool === tools.ERASER && !this.eraseTarget) {\n        const points = [];\n        points.push([mousex, mousey]);\n        for (let i = 0; i < 16; i += 1) {\n          /* eslint-disable no-mixed-operators */\n          points.push([\n            mousex + 0.5 * size * Math.cos(2 * Math.PI / 16 * i),\n            mousey + 0.5 * size * Math.sin(2 * Math.PI / 16 * i),\n          ]);\n        }\n        const target = this.drawingManager.getTopKey(points);\n        if (target) {\n          this.eraseTarget = target;\n        }\n      }\n    },\n    dragover(event) {\n      event.preventDefault();\n    },\n    drop(event) {\n      event.preventDefault();\n      const file = event.dataTransfer.files[0];\n      if (file.type !== 'image/png' && file.type !== 'image/jpeg') {\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onload = () => {\n        const image = document.createElement('img');\n        image.setAttribute('src', reader.result);\n        this.drawing = new Drawing(this.currentColor, null, document.querySelector('#drawing'));\n        this.drawing.drawObject({ canvas: image });\n        this.drawingManager.draw(\n          this.drawing,\n          this.currentColor,\n          this.currentTool,\n          this.editRange,\n        );\n      };\n      reader.readAsDataURL(file);\n    },\n  },\n};\n\n</script>\n\n<style>\n#ui-canvas\n{\n  width: 100%;\n  height: 100vh;\n}\n\ncanvas\n{\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  width: 100%;\n  height: 100vh;\n}\n\ncanvas:not(.md-image) {\n  height: 100vh;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// UiCanvas.vue?78dbeaf4","<template>\n  <div id='ui-layer-list'>\n    <ul v-if='layers'>\n      <li v-for='(layer, i) in layers' @mouseover='mouseover(i)' @mouseleave='mouseleave(i)'>\n        <md-button @click='clear(i)'>\n          <md-icon>clear</md-icon>\n        </md-button>\n        <img :src='layer.url'></img>\n        <ul v-if='layer.histories && active === i'>\n          <li style='display: inline;' v-for='(history, j) in layer.histories'>\n            <img :src='history' @click='rollback(i, j)'></img>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UiLayerList',\n  props: [\n    'layers',\n  ],\n  data() {\n    return {\n      active: -1,\n    };\n  },\n  methods: {\n    clear(index) {\n      this.$emit('onclear', index);\n    },\n    mouseover(index) {\n      this.active = index;\n    },\n    mouseleave(index) {\n      if (index === this.active) {\n        this.active = -1;\n      }\n    },\n    rollback(layerIdx, historyIdx) {\n      this.$emit('rollback', layerIdx, historyIdx);\n    },\n  },\n};\n</script>\n\n<style>\n#ui-layer-list>ul\n{\n  padding: 0;\n  margin: 0;\n}\n\n#ui-layer-list>ul>li\n{\n  position: relative;\n  list-style-type: none;\n\n  height: fit-content;\n}\n\n#ui-layer-list>ul>li>img\n{\n  width: 100%;\n  height: auto;\n  padding: 0;\n  margin: 0;\n\n  background: rgba(255, 255, 255, 0.8);\n}\n\n#ui-layer-list>ul>li>.md-button\n{\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  min-width: 36px;\n  min-height: 36px;\n}\n\n#ui-layer-list>ul>li>ul\n{\n  padding: 0;\n}\n\n#ui-layer-list>ul>li>ul>li>img\n{\n  width: 50%;\n  height: auto;\n  padding: 0;\n  margin: 0;\n\n  background: rgba(255, 255, 255, 0.4);\n}\n\n#ui-layer-list>ul>li>ul>li>img:hover\n{\n  box-shadow: 0 0 0 1px #e91e63 inset,0 8px 16px rgba(0,0,0,.15);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// UiLayerList.vue?404ea562","<template>\n  <div\n     class=\"ui-slider\" tabindex=\"0\" ref='slider'\n     :class=\"{ min: value === 0, max: value === 100, dragging: dragging }\"\n     @mousedown=\"sliderClick\" @keydown.left.prevent=\"decrement\" @keydown.right.prevent=\"increment\"\n>\n    <div class=\"ui-slider-containment\" ref='container'></div>\n\n    <div class=\"ui-slider-wrapper\">\n        <div class=\"ui-slider-track-container\">\n            <div class=\"ui-slider-track\"></div>\n            <div class=\"ui-slider-track-fill\" :style=\"{ width: value + '%'}\"></div>\n        </div>\n\n        <div class=\"ui-slider-thumb-container\" ref='thumb'>\n            <div class=\"ui-slider-focus-ring\"></div>\n            <div class=\"ui-slider-thumb\" ref='thumbCircle'></div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport Draggabilly from 'draggabilly';\n\nexport default {\n  name: 'UiSlider',\n  props: [\n    'defaultValue',\n  ],\n  data() {\n    return {\n      keyboardStep: 5,\n      value: this.defaultValue,\n      dragging: false,\n      draggable: null,\n    };\n  },\n  mounted() {\n    this.$refs.thumb.style.left = `${this.value}%`;\n\n    this.draggable = new Draggabilly(this.$refs.thumb, {\n      containment: this.$refs.container,\n      axis: 'x',\n    });\n\n    this.draggable.on('dragStart', this.dragStart);\n    this.draggable.on('dragMove', this.dragMove);\n    this.draggable.on('dragEnd', this.dragEnd);\n  },\n  methods: {\n    sliderClick(e) {\n      const sliderPosition = this.$refs.slider.getBoundingClientRect();\n\n      const newValue = ((e.clientX - sliderPosition.left) / sliderPosition.width) * 100;\n\n      this.setValue(newValue, true);\n\n      if (e.target !== this.$refs.thumb) {\n        /* eslint-disable no-underscore-dangle */\n        this.draggable._pointerDown(e, e);\n      }\n\n      this.$refs.slider.focus();\n    },\n\n    dragStart() {\n      this.dragging = true;\n      this.$refs.slider.focus();\n    },\n    dragMove() {\n      const x = this.draggable.position.x;\n      const newValue = (x / this.$refs.slider.getBoundingClientRect().width) * 100;\n\n      this.setValue(newValue);\n    },\n    dragEnd() {\n      this.dragging = false;\n    },\n    increment() {\n      if (this.value === 100) {\n        return;\n      }\n\n      this.setValue(this.value + this.keyboardStep, true);\n    },\n    decrement() {\n      if (this.value === 0) {\n        return;\n      }\n\n      this.setValue(this.value - this.keyboardStep, true);\n    },\n    setValue(newValue, updateThumb, emit = true) {\n      if (newValue === this.value) {\n        return;\n      }\n\n      let moderatedValue = Math.round(newValue);\n\n      if (moderatedValue >= 100) {\n        moderatedValue = 100;\n      }\n\n      if (moderatedValue <= 0) {\n        moderatedValue = 0;\n      }\n\n      this.value = moderatedValue;\n\n      if (updateThumb) {\n        this.$refs.thumb.style.left = `${this.value}%`;\n      }\n      if (emit) {\n        this.$emit('change-value', this.value);\n      }\n    },\n  },\n};\n</script>\n\n<style>\n.ui-slider {\n  position: relative;\n  width: 100%;\n  height: 42px;\n  display: flex;\n  align-items: center;\n  outline: none;\n}\n.ui-slider:hover .ui-slider-thumb {\n  transform: scale(1.1);\n}\n.ui-slider:focus .ui-slider-thumb,\n.ui-slider.dragging .ui-slider-thumb {\n  transform: scale(1.1);\n}\n.ui-slider:focus .ui-slider-focus-ring,\n.ui-slider.dragging .ui-slider-focus-ring {\n  transform: scale(1);\n}\n.ui-slider-wrapper {\n  position: relative;\n  width: 100%;\n}\n.ui-slider-track-container {\n  position: relative;\n}\n.ui-slider-track {\n  height: 3px;\n  background-color: rgba(0,0,0,0.28);\n  width: 100%;\n}\n.ui-slider-track-fill {\n  position: absolute;\n  top: 0;\n  height: 3px;\n  background-color: #e91e63;\n}\n.ui-slider-thumb-container {\n  position: absolute;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: -20.5px;\n  margin-left: -20.5px;\n  width: 38px;\n  height: 38px;\n}\n.ui-slider-thumb {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 16px;\n  height: 16px;\n  background-color: #e91e63;\n  border-radius: 50%;\n  transition-property: transform;\n  transition-duration: 0.2s;\n  transition-timing-function: linear;\n  transform: scale(1);\n}\n.ui-slider-focus-ring {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 38px;\n  height: 38px;\n  border-radius: 50%;\n  background-color: rgba(233,30,99,0.38);\n  transition: transform 0.2s ease;\n  transform: scale(0);\n}\n.ui-slider-containment {\n  left: 0;\n  right: 0;\n  position: absolute;\n  margin-left: -20.5px;\n  margin-right: -20.5px;\n}\n.page {\n  max-width: 400px;\n  margin: 24px;\n}\n.page input {\n  margin-top: 40px;\n}\n* {\n  box-sizing: border-box;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// UiSlider.vue?1e15156e","\n/* styles */\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../node_modules/vue-loader/lib/style-rewriter?id=data-v-273a77c8!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler?id=data-v-273a77c8!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 176\n// module chunks = 2","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-01d34620!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UiCanvas.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UiCanvas.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-01d34620!../../node_modules/vue-loader/lib/selector?type=template&index=0!./UiCanvas.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/UiCanvas.vue\n// module id = 177\n// module chunks = 2","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-29c54477!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UiLayerList.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UiLayerList.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-29c54477!../../node_modules/vue-loader/lib/selector?type=template&index=0!./UiLayerList.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/UiLayerList.vue\n// module id = 178\n// module chunks = 2","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-26eb45ae!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UiSlider.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UiSlider.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-26eb45ae!../../node_modules/vue-loader/lib/selector?type=template&index=0!./UiSlider.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/UiSlider.vue\n// module id = 179\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"ui-canvas\"\n    }\n  }, [_c('canvas', {\n    attrs: {\n      \"id\": \"fixed-canvas\"\n    }\n  }), _vm._v(\" \"), _c('canvas', {\n    ref: \"drawing\",\n    attrs: {\n      \"id\": \"drawing\"\n    },\n    on: {\n      \"mousedown\": _vm.mousedown,\n      \"touchstart\": _vm.mousedown,\n      \"mousemove\": _vm.mousemove,\n      \"touchmove\": _vm.mousemove,\n      \"mouseup\": _vm.mouseup,\n      \"touchend\": _vm.mouseup,\n      \"mouseleave\": _vm.mouseup\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-01d34620!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/UiCanvas.vue\n// module id = 180\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"slider\",\n    staticClass: \"ui-slider\",\n    class: {\n      min: _vm.value === 0, max: _vm.value === 100, dragging: _vm.dragging\n    },\n    attrs: {\n      \"tabindex\": \"0\"\n    },\n    on: {\n      \"mousedown\": _vm.sliderClick,\n      \"keydown\": [function($event) {\n        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, \"left\", 37, $event.key, [\"Left\", \"ArrowLeft\"])) { return null; }\n        if ('button' in $event && $event.button !== 0) { return null; }\n        $event.preventDefault();\n        return _vm.decrement($event)\n      }, function($event) {\n        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, \"right\", 39, $event.key, [\"Right\", \"ArrowRight\"])) { return null; }\n        if ('button' in $event && $event.button !== 2) { return null; }\n        $event.preventDefault();\n        return _vm.increment($event)\n      }]\n    }\n  }, [_c('div', {\n    ref: \"container\",\n    staticClass: \"ui-slider-containment\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui-slider-wrapper\"\n  }, [_c('div', {\n    staticClass: \"ui-slider-track-container\"\n  }, [_c('div', {\n    staticClass: \"ui-slider-track\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui-slider-track-fill\",\n    style: ({\n      width: _vm.value + '%'\n    })\n  })]), _vm._v(\" \"), _c('div', {\n    ref: \"thumb\",\n    staticClass: \"ui-slider-thumb-container\"\n  }, [_c('div', {\n    staticClass: \"ui-slider-focus-ring\"\n  }), _vm._v(\" \"), _c('div', {\n    ref: \"thumbCircle\",\n    staticClass: \"ui-slider-thumb\"\n  })])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-26eb45ae!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/UiSlider.vue\n// module id = 181\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('ui-canvas', {\n    attrs: {\n      \"current-color\": _vm.currentColor,\n      \"current-tool\": _vm.currentTool,\n      \"prev-tool\": _vm.prevTool,\n      \"tool-sizes\": _vm.toolSizes,\n      \"drawing-manager\": _vm.drawingManager\n    },\n    on: {\n      \"ontune\": _vm.ontune,\n      \"onextractcolor\": _vm.onextractcolor\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showPalette),\n      expression: \"showPalette\"\n    }],\n    staticClass: \"palette\"\n  }, [_c('sketch', {\n    ref: \"colorPicker\",\n    attrs: {\n      \"id\": \"color-picker\"\n    },\n    on: {\n      \"change-color\": _vm.onchange\n    },\n    model: {\n      value: (_vm.currentColor),\n      callback: function($$v) {\n        _vm.currentColor = $$v\n      },\n      expression: \"currentColor\"\n    }\n  }), _vm._v(\" \"), _c('ui-slider', {\n    ref: \"slider\",\n    attrs: {\n      \"defaultValue\": _vm.defaultSize\n    },\n    on: {\n      \"change-value\": _vm.onchangesize\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"layer-box\"\n    }\n  }, [(_vm.drawingManager) ? _c('ui-layer-list', {\n    staticClass: \"layer-list\",\n    attrs: {\n      \"layers\": _vm.drawingManager.layers\n    },\n    on: {\n      \"onclear\": _vm.onclear,\n      \"rollback\": _vm.rollback\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"show-layer-box\"\n    }\n  }, [_c('md-switch', {\n    on: {\n      \"change\": _vm.onchangevisiual\n    },\n    model: {\n      value: (_vm.showPen),\n      callback: function($$v) {\n        _vm.showPen = $$v\n      },\n      expression: \"showPen\"\n    }\n  }, [_vm._v(\"\")]), _vm._v(\" \"), _c('md-switch', {\n    on: {\n      \"change\": _vm.onchangevisiual\n    },\n    model: {\n      value: (_vm.showBase),\n      callback: function($$v) {\n        _vm.showBase = $$v\n      },\n      expression: \"showBase\"\n    }\n  }, [_vm._v(\"\")]), _vm._v(\" \"), _c('md-switch', {\n    on: {\n      \"change\": _vm.onchangevisiual\n    },\n    model: {\n      value: (_vm.showExtra),\n      callback: function($$v) {\n        _vm.showExtra = $$v\n      },\n      expression: \"showExtra\"\n    }\n  }, [_vm._v(\"\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"canvas-box\"\n    }\n  }, [_c('md-button', {\n    staticClass: \"md-fab\",\n    on: {\n      \"click\": _vm.newcanvas\n    }\n  }, [_c('md-icon', [_vm._v(\"note_add\")])], 1), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"md-fab md-mini\",\n    on: {\n      \"click\": _vm.togglepalette\n    }\n  }, [_c('md-icon', [_vm._v(\"palette\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"tool-box\"\n    }\n  }, [_c('md-button-toggle', {\n    ref: \"toolButtons\",\n    staticClass: \"md-accent\",\n    attrs: {\n      \"md-single\": \"\"\n    }\n  }, [_c('md-button', {\n    ref: \"penButton\",\n    staticClass: \"md-icon-button md-toggle\",\n    on: {\n      \"click\": function($event) {\n        return _vm.toggletool(\"pen\")\n      }\n    }\n  }, [_c('md-icon', [_vm._v(\"edit\")])], 1), _vm._v(\" \"), _c('md-button', {\n    ref: \"brushButton\",\n    staticClass: \"md-icon-button\",\n    on: {\n      \"click\": function($event) {\n        return _vm.toggletool(\"brush\")\n      }\n    }\n  }, [_c('md-icon', [_vm._v(\"brush\")])], 1), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"md-icon-button\",\n    on: {\n      \"click\": function($event) {\n        return _vm.toggletool(\"eraser\")\n      }\n    }\n  }, [_c('md-icon', [_vm._v(\"call_to_action\")])], 1), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"md-icon-button\",\n    on: {\n      \"click\": function($event) {\n        return _vm.toggletool(\"spoit\")\n      }\n    }\n  }, [_c('md-icon', [_vm._v(\"colorize\")])], 1), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"md-icon-button\",\n    on: {\n      \"click\": function($event) {\n        return _vm.toggletool(\"color\")\n      }\n    }\n  }, [_c('md-icon', [_vm._v(\"tune\")])], 1)], 1)], 1), _vm._v(\" \"), _c('md-dialog', {\n    ref: \"colorDialog\",\n    attrs: {\n      \"id\": \"color-dialog\"\n    }\n  }, [_c('md-dialog-title', [_vm._v(\"\")]), _vm._v(\" \"), _c('md-dialog-content', [_vm._v(\"\\n      \\n      \"), _c('ui-slider', {\n    ref: \"hueSlider\",\n    attrs: {\n      \"defaultValue\": 50\n    },\n    on: {\n      \"change-value\": _vm.onchangehue\n    }\n  }), _vm._v(\"\\n      \\n      \"), _c('ui-slider', {\n    ref: \"satSlider\",\n    attrs: {\n      \"defaultValue\": 50\n    },\n    on: {\n      \"change-value\": _vm.onchangesat\n    }\n  }), _vm._v(\"\\n      \\n      \"), _c('ui-slider', {\n    ref: \"valSlider\",\n    attrs: {\n      \"defaultValue\": 50\n    },\n    on: {\n      \"change-value\": _vm.onchangeval\n    }\n  })], 1), _vm._v(\" \"), _c('md-dialog-actions', [_c('md-button', {\n    staticClass: \"md-primary\",\n    on: {\n      \"click\": _vm.closeColorDialog\n    }\n  }, [_vm._v(\"\")]), _vm._v(\" \"), _c('md-button', {\n    staticClass: \"md-primary\",\n    on: {\n      \"click\": _vm.applyColorDialog\n    }\n  }, [_vm._v(\"\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-273a77c8!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 182\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"ui-layer-list\"\n    }\n  }, [(_vm.layers) ? _c('ul', _vm._l((_vm.layers), function(layer, i) {\n    return _c('li', {\n      on: {\n        \"mouseover\": function($event) {\n          return _vm.mouseover(i)\n        },\n        \"mouseleave\": function($event) {\n          return _vm.mouseleave(i)\n        }\n      }\n    }, [_c('md-button', {\n      on: {\n        \"click\": function($event) {\n          return _vm.clear(i)\n        }\n      }\n    }, [_c('md-icon', [_vm._v(\"clear\")])], 1), _vm._v(\" \"), _c('img', {\n      attrs: {\n        \"src\": layer.url\n      }\n    }), _vm._v(\" \"), (layer.histories && _vm.active === i) ? _c('ul', _vm._l((layer.histories), function(history, j) {\n      return _c('li', {\n        staticStyle: {\n          \"display\": \"inline\"\n        }\n      }, [_c('img', {\n        attrs: {\n          \"src\": history\n        },\n        on: {\n          \"click\": function($event) {\n            return _vm.rollback(i, j)\n          }\n        }\n      })])\n    }), 0) : _vm._e()], 1)\n  }), 0) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-29c54477!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/UiLayerList.vue\n// module id = 183\n// module chunks = 2"],"sourceRoot":""}